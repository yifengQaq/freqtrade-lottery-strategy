[
  {
    "round": 1,
    "timestamp": "2026-02-28T14:42:08.997019+00:00",
    "changes_made": "[入场重构] 换用 MACD_CROSS+RSI+ATR_EXPANSION 组合替代旧的 BBANDS+STOCH+ADX，引入新家族 volatility 因子 ATR_EXPANSION",
    "rationale": "上轮策略在熊市和横盘市亏损严重（总利润 -35.98%/-15.66%），胜率低（0.4/0.37），表明突破策略不适应震荡市。改用趋势确认（MACD 金叉）+ 动量过滤（RSI 中性区）+ 波动率扩张（ATR 突破）组合，旨在捕捉趋势启动点，提高胜率和跨市况适应性。引入新家族 volatility 因子以满足硬约束。",
    "backtest_metrics": {
      "total_profit_pct": -78.30938471999998,
      "total_profit_abs": -78.30938471999998,
      "max_drawdown_pct": 87.46258661353927,
      "max_drawdown_abs": 90.81663694,
      "sharpe_ratio": -0.2793936909905764,
      "sortino_ratio": -0.28613485762302515,
      "profit_factor": 0.71448981725788,
      "calmar_ratio": -0.9383206157801245,
      "sqn": -1.5093,
      "cagr": -0.26360854554808566,
      "expectancy": -0.2517986646945337,
      "expectancy_ratio": -0.15055842433989608,
      "win_rate": 0.47266881028938906,
      "total_trades": 311,
      "trade_count_long": 159,
      "trade_count_short": 152,
      "avg_profit_per_trade_pct": -0.31827659013997556,
      "avg_trade_duration": "1:42:00",
      "backtest_days": 1823,
      "market_change": 7.828158636707855,
      "best_pair": {
        "key": "XRP/USDT:USDT",
        "trades": 30,
        "profit_mean": 0.01388435681659101,
        "profit_mean_pct": 1.39,
        "profit_total_abs": 7.77883894,
        "profit_total": 0.0777883894,
        "profit_total_pct": 7.78,
        "duration_avg": "1:36:00",
        "wins": 18,
        "draws": 0,
        "losses": 12,
        "winrate": 0.6,
        "cagr": 0.015111712169339375,
        "expectancy": 0.25929463133333336,
        "expectancy_ratio": 0.2450185964704814,
        "sortino": 0.05616102195858238,
        "sharpe": 0.05009415267694671,
        "calmar": 1.058319087117153,
        "sqn": 0.858,
        "profit_factor": 1.6125464911762042,
        "max_drawdown_account": 0.07702964818053942,
        "max_drawdown_abs": 7.84512698
      },
      "worst_pair": {
        "key": "ATOM/USDT:USDT",
        "trades": 19,
        "profit_mean": -0.031738472072402824,
        "profit_mean_pct": -3.17,
        "profit_total_abs": -32.23671909,
        "profit_total": -0.3223671909,
        "profit_total_pct": -32.24,
        "duration_avg": "1:54:00",
        "wins": 7,
        "draws": 0,
        "losses": 12,
        "winrate": 0.3684210526315789,
        "cagr": -0.07495725350701099,
        "expectancy": -1.6966694257894737,
        "expectancy_ratio": -0.5268212530799686,
        "sortino": -0.08557481083598545,
        "sharpe": -0.09008525242314334,
        "calmar": -0.966334067033154,
        "sqn": -1.9194,
        "profit_factor": 0.16586634929004967,
        "max_drawdown_account": 0.3496095665999999,
        "max_drawdown_abs": 34.96095666
      },
      "total_trades_count": 311,
      "stake_limit_hit_count": 0,
      "weekly_target_hit_rate": 0,
      "total_weeks": 0,
      "target_hit_weeks": 0,
      "monthly_net_profit_avg": 0,
      "max_monthly_loss": 0,
      "avg_trade_duration_hours": 1.70016077170418
    },
    "eval_result": {
      "passed": false,
      "score": 5.88,
      "gate_failures": [
        "weekly_target_hit_rate=0.00% < 25.00%",
        "monthly_net_profit_avg=0.00 <= 0.0"
      ],
      "score_breakdown": {
        "monthly_profit_component": 0.0,
        "weekly_hit_rate_component": 0.0,
        "max_loss_penalty": 0.0,
        "trade_efficiency_component": 5.8818
      },
      "is_overfitting": false,
      "recommendation": "周达标率过低, 考虑: 1) 降低目标倍数 2) 增加杠杆(风险更高) 3) 优化入场时机 | 平均每笔亏损, 信号质量需要根本性改善"
    },
    "score": 5.88,
    "strategy_version_path": "results/strategy_versions/round_001_20260228_224503__入场重构__换用_MACD_CROSS_RSI_ATR_EXPANSION_组合替代旧的_BBAN.py",
    "next_action": "continue",
    "status": "success",
    "comparison_matrix": {
      "round": 1,
      "candidate_id": "round_1",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {
          "total_profit_pct": 6.244447099999999,
          "total_profit_abs": 6.244447099999999,
          "max_drawdown_pct": 24.080790074999342,
          "max_drawdown_abs": 26.25918151,
          "sharpe_ratio": 0.1067211825735498,
          "sortino_ratio": 0.12486409773100032,
          "profit_factor": 1.0970156712957668,
          "calmar_ratio": 4.16315643165749,
          "sqn": 0.1449,
          "cagr": 0.20416835262378785,
          "expectancy": 0.3122223550000003,
          "expectancy_ratio": 0.029104701388730003,
          "win_rate": 0.7,
          "total_trades": 20,
          "trade_count_long": 11,
          "trade_count_short": 9,
          "avg_profit_per_trade_pct": 0.7732190626693874,
          "avg_trade_duration": "1:28:00",
          "backtest_days": 119,
          "market_change": 6.306318451118336,
          "best_pair": {
            "key": "DOT/USDT:USDT",
            "trades": 4,
            "profit_mean": 0.059736476222640805,
            "profit_mean_pct": 5.97,
            "profit_total_abs": 18.676833450000004,
            "profit_total": 0.18676833450000005,
            "profit_total_pct": 18.68,
            "duration_avg": "0:41:00",
            "wins": 3,
            "draws": 0,
            "losses": 1,
            "winrate": 0.75,
            "cagr": 0.6908194744720044,
            "expectancy": 4.669208362500001,
            "expectancy_ratio": 0.42250208508911813,
            "sortino": -100,
            "sharpe": 0.263296137707547,
            "calmar": 33.91399731229748,
            "sqn": 0.7101,
            "profit_factor": 2.6900083403564725,
            "max_drawdown_account": 0.08841454889254292,
            "max_drawdown_abs": 11.0513262
          },
          "worst_pair": {
            "key": "AVAX/USDT:USDT",
            "trades": 4,
            "profit_mean": -0.11339284272351177,
            "profit_mean_pct": -11.34,
            "profit_total_abs": -44.748505,
            "profit_total": -0.44748505,
            "profit_total_pct": -44.75,
            "duration_avg": "2:08:00",
            "wins": 1,
            "draws": 0,
            "losses": 3,
            "winrate": 0.25,
            "cagr": -0.837926992340124,
            "expectancy": -11.18712625,
            "expectancy_ratio": -0.6513544624519195,
            "sortino": -1.509622294577701,
            "sharpe": -0.6437187044682448,
            "calmar": -16.05459930633849,
            "sqn": -1.7362,
            "profit_factor": 0.1315273833974406,
            "max_drawdown_account": 0.44748505,
            "max_drawdown_abs": 44.748505
          },
          "total_trades_count": 20,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 1.4625
        },
        "bear_2022": {
          "total_profit_pct": -35.98067832,
          "total_profit_abs": -35.98067832,
          "max_drawdown_pct": 44.85896757900121,
          "max_drawdown_abs": 52.081735679999994,
          "sharpe_ratio": -0.7883852471206687,
          "sortino_ratio": -0.8983342368464797,
          "profit_factor": 0.45083118989395243,
          "calmar_ratio": -10.015556236241585,
          "sqn": -1.2372,
          "cagr": -0.6549105888932999,
          "expectancy": -1.4392271328000001,
          "expectancy_ratio": -0.3295012860636285,
          "win_rate": 0.4,
          "total_trades": 25,
          "trade_count_long": 14,
          "trade_count_short": 11,
          "avg_profit_per_trade_pct": -1.598157569985002,
          "avg_trade_duration": "1:01:00",
          "backtest_days": 153,
          "market_change": -0.3798385322447017,
          "best_pair": {
            "key": "LTC/USDT:USDT",
            "trades": 2,
            "profit_mean": 0.03728883621176379,
            "profit_mean_pct": 3.73,
            "profit_total_abs": 8.108970979999999,
            "profit_total": 0.08108970979999999,
            "profit_total_pct": 8.11,
            "duration_avg": "0:22:00",
            "wins": 1,
            "draws": 0,
            "losses": 1,
            "winrate": 0.5,
            "cagr": 0.20442915548686114,
            "expectancy": 4.054485489999999,
            "expectancy_ratio": 14.804819023265503,
            "sortino": -100,
            "sharpe": 0.23393681496770774,
            "calmar": 400.72699605353756,
            "sqn": 0.9367,
            "profit_factor": 30.609638046531007,
            "max_drawdown_account": 0.002526807438783189,
            "max_drawdown_abs": 0.2738625500000005
          },
          "worst_pair": {
            "key": "UNI/USDT:USDT",
            "trades": 1,
            "profit_mean": -0.19145944738802262,
            "profit_mean_pct": -19.15,
            "profit_total_abs": -19.965413,
            "profit_total": -0.19965413,
            "profit_total_pct": -19.97,
            "duration_avg": "1:00:00",
            "wins": 0,
            "draws": 0,
            "losses": 1,
            "winrate": 0.0,
            "cagr": -0.4121625133767898,
            "expectancy": -19.965413,
            "expectancy_ratio": -1.0,
            "sortino": -100,
            "sharpe": -100,
            "calmar": -12.486910571596603,
            "sqn": -100.0,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.19965412999999999,
            "max_drawdown_abs": 19.965413
          },
          "total_trades_count": 25,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 1.01
        },
        "sideways_2023": {
          "total_profit_pct": -15.664795100000003,
          "total_profit_abs": -15.664795100000003,
          "max_drawdown_pct": 26.78972721852595,
          "max_drawdown_abs": 30.4073764,
          "sharpe_ratio": -0.5793195002207988,
          "sortino_ratio": -1.044921685411204,
          "profit_factor": 0.6155810265162095,
          "calmar_ratio": -9.156785241859518,
          "sqn": -0.8261,
          "cagr": -0.3993337956404738,
          "expectancy": -0.8244628999999994,
          "expectancy_ratio": -0.24279093062134138,
          "win_rate": 0.3684210526315789,
          "total_trades": 19,
          "trade_count_long": 5,
          "trade_count_short": 14,
          "avg_profit_per_trade_pct": -0.826942433357312,
          "avg_trade_duration": "2:15:00",
          "backtest_days": 122,
          "market_change": -0.054497021911408074,
          "best_pair": {
            "key": "BNB/USDT:USDT",
            "trades": 1,
            "profit_mean": 0.08230909476102627,
            "profit_mean_pct": 8.23,
            "profit_total_abs": 8.05991515,
            "profit_total": 0.08059915150000001,
            "profit_total_pct": 8.06,
            "duration_avg": "0:15:00",
            "wins": 1,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 0.26100824750232543,
            "expectancy": 8.05991515,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": -100,
            "calmar": -100,
            "sqn": -100.0,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "BCH/USDT:USDT",
            "trades": 2,
            "profit_mean": -0.0689927685820731,
            "profit_mean_pct": -6.9,
            "profit_total_abs": -14.738197,
            "profit_total": -0.14738197,
            "profit_total_pct": -14.74,
            "duration_avg": "2:22:00",
            "wins": 0,
            "draws": 0,
            "losses": 2,
            "winrate": 0.0,
            "cagr": -0.37937234633878547,
            "expectancy": -7.3690985,
            "expectancy_ratio": -1.0,
            "sortino": -2.5802899475263037,
            "sharpe": -2.5802899475263037,
            "calmar": -15.659814077494097,
            "sqn": -8.2386,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.14738197,
            "max_drawdown_abs": 14.738197
          },
          "total_trades_count": 19,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 2.25
        },
        "recovery_2024": {
          "total_profit_pct": -29.840874110000005,
          "total_profit_abs": -29.840874110000005,
          "max_drawdown_pct": 29.840874110000005,
          "max_drawdown_abs": 29.840874109999998,
          "sharpe_ratio": -1.0227855242552566,
          "sortino_ratio": -1.333000204517872,
          "profit_factor": 0.4042947710661879,
          "calmar_ratio": -12.569061299041314,
          "sqn": -1.6595,
          "cagr": -0.5730279112383295,
          "expectancy": -1.2974293091304352,
          "expectancy_ratio": -0.3885034101742253,
          "win_rate": 0.34782608695652173,
          "total_trades": 23,
          "trade_count_long": 15,
          "trade_count_short": 8,
          "avg_profit_per_trade_pct": -1.443152974685439,
          "avg_trade_duration": "1:44:00",
          "backtest_days": 152,
          "market_change": 0.26429653100850814,
          "best_pair": {
            "key": "BTC/USDT:USDT",
            "trades": 5,
            "profit_mean": 0.004692939955063083,
            "profit_mean_pct": 0.47,
            "profit_total_abs": 2.3354186,
            "profit_total": 0.023354186000000002,
            "profit_total_pct": 2.34,
            "duration_avg": "2:03:00",
            "wins": 3,
            "draws": 0,
            "losses": 2,
            "winrate": 0.6,
            "cagr": 0.057001298821315105,
            "expectancy": 0.46708372,
            "expectancy_ratio": 0.22882748465259817,
            "sortino": 2.5928564478377205,
            "sharpe": 0.1393171415658189,
            "calmar": 13.235439701932942,
            "sqn": 0.4434,
            "profit_factor": 1.5720687116314958,
            "max_drawdown_account": 0.02217834858787072,
            "max_drawdown_abs": 2.3211089499999997
          },
          "worst_pair": {
            "key": "LINK/USDT:USDT",
            "trades": 1,
            "profit_mean": -0.12579123411611162,
            "profit_mean_pct": -12.58,
            "profit_total_abs": -11.58409436,
            "profit_total": -0.1158409436,
            "profit_total_pct": -11.58,
            "duration_avg": "3:15:00",
            "wins": 0,
            "draws": 0,
            "losses": 1,
            "winrate": 0.0,
            "cagr": -0.2559491714282137,
            "expectancy": -11.58409436,
            "expectancy_ratio": -1.0,
            "sortino": -100,
            "sharpe": -100,
            "calmar": -12.569061299041321,
            "sqn": -100.0,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.11584094359999994,
            "max_drawdown_abs": 11.58409436
          },
          "total_trades_count": 23,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 1.7282608695652175
        },
        "recent_2025": {
          "total_profit_pct": 23.358077290000004,
          "total_profit_abs": 23.358077290000004,
          "max_drawdown_pct": 19.103238405129748,
          "max_drawdown_abs": 29.13019895,
          "sharpe_ratio": 0.40157243711123264,
          "sortino_ratio": 0.7679852291246038,
          "profit_factor": 1.4299416383306864,
          "calmar_ratio": 15.470330094236674,
          "sqn": 0.622,
          "cagr": 0.6610090285488264,
          "expectancy": 0.9343230915999996,
          "expectancy_ratio": 0.17197665533227458,
          "win_rate": 0.6,
          "total_trades": 25,
          "trade_count_long": 15,
          "trade_count_short": 10,
          "avg_profit_per_trade_pct": 1.0943621316243832,
          "avg_trade_duration": "0:59:00",
          "backtest_days": 151,
          "market_change": -0.2185757530104535,
          "best_pair": {
            "key": "SOL/USDT:USDT",
            "trades": 5,
            "profit_mean": 0.0409935370048573,
            "profit_mean_pct": 4.1,
            "profit_total_abs": 21.71631295,
            "profit_total": 0.2171631295,
            "profit_total_pct": 21.72,
            "duration_avg": "0:18:00",
            "wins": 4,
            "draws": 0,
            "losses": 1,
            "winrate": 0.8,
            "cagr": 0.6080763817577779,
            "expectancy": 4.34326259,
            "expectancy_ratio": 0.3921395703139672,
            "sortino": -100,
            "sharpe": 0.2380290387328398,
            "calmar": 32.0421857145656,
            "sqn": 0.7525,
            "profit_factor": 2.9606978515698357,
            "max_drawdown_account": 0.0857498646612616,
            "max_drawdown_abs": 11.075808000000002
          },
          "worst_pair": {
            "key": "ETH/USDT:USDT",
            "trades": 3,
            "profit_mean": -0.03759080743117185,
            "profit_mean_pct": -3.76,
            "profit_total_abs": -15.5022851,
            "profit_total": -0.155022851,
            "profit_total_pct": -15.5,
            "duration_avg": "1:25:00",
            "wins": 0,
            "draws": 0,
            "losses": 3,
            "winrate": 0.0,
            "cagr": -0.3344689971749235,
            "expectancy": -5.167428366666667,
            "expectancy_ratio": -1.0,
            "sortino": -0.5615723406832558,
            "sharpe": -0.5615723406832558,
            "calmar": -12.652300115591263,
            "sqn": -2.0923,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.15502285099999993,
            "max_drawdown_abs": 15.5022851
          },
          "total_trades_count": 25,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 0.98
        }
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 1,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": -50.0
      },
      "weighted_norm": 1.870829,
      "mode": "explore"
    }
  },
  {
    "round": 2,
    "timestamp": "2026-02-28T14:50:19.430963+00:00",
    "changes_made": "[入场重构] 换用 BBANDS_BREAKOUT+RSI+ADX 组合替代旧的 MACD+RSI+ATR_EXPANSION，引入 volatility 家族新因子",
    "rationale": "上轮策略在牛市和熊市表现不佳（总利润-46.21%和-30.30%），胜率低（34.6%-48.3%），最大回撤高（39.65%）。MACD趋势跟随在震荡市失效。改用布林带突破+RSI过滤+ADX趋势确认组合，适应不同市况：突破捕捉波动，RSI避免超买超卖，ADX过滤震荡。引入 volatility 家族新因子（BBANDS_BREAKOUT）满足因子家族硬约束。",
    "backtest_metrics": {
      "total_profit_pct": -84.41100967,
      "total_profit_abs": -84.41100967,
      "max_drawdown_pct": 90.1157734018269,
      "max_drawdown_abs": 124.25695137000011,
      "sharpe_ratio": -0.15761817375728446,
      "sortino_ratio": -0.1677068263642686,
      "profit_factor": 0.8293411401304043,
      "calmar_ratio": -0.9816531043399296,
      "sqn": -0.8801,
      "cagr": -0.3107345862479852,
      "expectancy": -0.29007219817869445,
      "expectancy_ratio": -0.0826903754007321,
      "win_rate": 0.5154639175257731,
      "total_trades": 291,
      "trade_count_long": 152,
      "trade_count_short": 139,
      "avg_profit_per_trade_pct": -0.3512542361125576,
      "avg_trade_duration": "1:41:00",
      "backtest_days": 1823,
      "market_change": 7.828158636707855,
      "best_pair": {
        "key": "XRP/USDT:USDT",
        "trades": 34,
        "profit_mean": 0.01567252123926084,
        "profit_mean_pct": 1.57,
        "profit_total_abs": 16.989053730000002,
        "profit_total": 0.16989053730000003,
        "profit_total_pct": 16.99,
        "duration_avg": "1:31:00",
        "wins": 22,
        "draws": 0,
        "losses": 12,
        "winrate": 0.6470588235294118,
        "cagr": 0.031915172321510976,
        "expectancy": 0.4996780508823526,
        "expectancy_ratio": 0.20760460000347014,
        "sortino": 0.05611207963512481,
        "sharpe": 0.052537770124136386,
        "calmar": 1.5086672612286665,
        "sqn": 0.847,
        "profit_factor": 1.5882130333431652,
        "max_drawdown_account": 0.11801453170000002,
        "max_drawdown_abs": 11.80145317
      },
      "worst_pair": {
        "key": "ATOM/USDT:USDT",
        "trades": 14,
        "profit_mean": -0.04240144783444437,
        "profit_mean_pct": -4.24,
        "profit_total_abs": -55.94392434000001,
        "profit_total": -0.5594392434000001,
        "profit_total_pct": -55.94,
        "duration_avg": "2:26:00",
        "wins": 5,
        "draws": 0,
        "losses": 9,
        "winrate": 0.35714285714285715,
        "cagr": -0.15136087525695352,
        "expectancy": -3.995994595714287,
        "expectancy_ratio": -0.44005177453540867,
        "sortino": -0.0643459815476567,
        "sharpe": -0.05500086517415848,
        "calmar": -0.9006974636161286,
        "sqn": -1.3516,
        "profit_factor": 0.3154750173893643,
        "max_drawdown_account": 0.650929196581403,
        "max_drawdown_abs": 81.10129693000002
      },
      "total_trades_count": 291,
      "stake_limit_hit_count": 0,
      "weekly_target_hit_rate": 0,
      "total_weeks": 0,
      "target_hit_weeks": 0,
      "monthly_net_profit_avg": 0,
      "max_monthly_loss": 0,
      "avg_trade_duration_hours": 1.6795532646048108
    },
    "eval_result": {
      "passed": false,
      "score": 5.95,
      "gate_failures": [
        "weekly_target_hit_rate=0.00% < 25.00%",
        "monthly_net_profit_avg=0.00 <= 0.0"
      ],
      "score_breakdown": {
        "monthly_profit_component": 0.0,
        "weekly_hit_rate_component": 0.0,
        "max_loss_penalty": 0.0,
        "trade_efficiency_component": 5.954
      },
      "is_overfitting": false,
      "recommendation": "周达标率过低, 考虑: 1) 降低目标倍数 2) 增加杠杆(风险更高) 3) 优化入场时机 | 平均每笔亏损, 信号质量需要根本性改善"
    },
    "score": 5.95,
    "strategy_version_path": "results/strategy_versions/round_002_20260228_225331__入场重构__换用_BBANDS_BREAKOUT_RSI_ADX_组合替代旧的_MACD_RSI_.py",
    "next_action": "continue",
    "status": "success",
    "comparison_matrix": {
      "round": 2,
      "candidate_id": "round_2",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {
          "total_profit_pct": -46.21048346000001,
          "total_profit_abs": -46.21048346000001,
          "max_drawdown_pct": 52.321676585761246,
          "max_drawdown_abs": 54.32812920999999,
          "sharpe_ratio": -0.9208043286550563,
          "sortino_ratio": -1.1964770653980668,
          "profit_factor": 0.5189459849741701,
          "calmar_ratio": -14.299580110151943,
          "sqn": -1.0937,
          "cagr": -0.8531112735709432,
          "expectancy": -1.777326286923077,
          "expectancy_ratio": -0.3145353175168888,
          "win_rate": 0.34615384615384615,
          "total_trades": 26,
          "trade_count_long": 18,
          "trade_count_short": 8,
          "avg_profit_per_trade_pct": -1.797432504095954,
          "avg_trade_duration": "0:59:00",
          "backtest_days": 118,
          "market_change": 6.433824368121245,
          "best_pair": {
            "key": "ADA/USDT:USDT",
            "trades": 2,
            "profit_mean": 0.0644282474890266,
            "profit_mean_pct": 6.44,
            "profit_total_abs": 7.727549770000001,
            "profit_total": 0.07727549770000001,
            "profit_total_pct": 7.73,
            "duration_avg": "1:22:00",
            "wins": 1,
            "draws": 0,
            "losses": 1,
            "winrate": 0.5,
            "cagr": 0.25890761273501295,
            "expectancy": 3.8637748850000007,
            "expectancy_ratio": 0.3673572729112724,
            "sortino": -100,
            "sharpe": 0.08699635524304986,
            "calmar": 11.895509905835686,
            "sqn": 0.2687,
            "profit_factor": 1.7347145458225448,
            "max_drawdown_account": 0.10517757970000005,
            "max_drawdown_abs": 10.51775797
          },
          "worst_pair": {
            "key": "SOL/USDT:USDT",
            "trades": 2,
            "profit_mean": -0.1640397007396929,
            "profit_mean_pct": -16.4,
            "profit_total_abs": -27.05985695,
            "profit_total": -0.2705985695,
            "profit_total_pct": -27.06,
            "duration_avg": "1:22:00",
            "wins": 0,
            "draws": 0,
            "losses": 2,
            "winrate": 0.0,
            "cagr": -0.6231872987618368,
            "expectancy": -13.529928475,
            "expectancy_ratio": -1.0,
            "sortino": -0.3463040923005101,
            "sharpe": -0.3463040923005101,
            "calmar": -16.190655232663392,
            "sqn": -1.0695,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.27059856949999994,
            "max_drawdown_abs": 27.05985695
          },
          "total_trades_count": 26,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 0.9903846153846153
        },
        "bear_2022": {
          "total_profit_pct": 18.6227425,
          "total_profit_abs": 18.6227425,
          "max_drawdown_pct": 12.2209819375523,
          "max_drawdown_abs": 13.995260459999999,
          "sharpe_ratio": 0.37927504550167307,
          "sortino_ratio": 0.8250564791661368,
          "profit_factor": 1.38244740968434,
          "calmar_ratio": 19.027973479023576,
          "sqn": 0.6069,
          "cagr": 0.502922678296839,
          "expectancy": 0.7759476041666669,
          "expectancy_ratio": 0.2390296310527127,
          "win_rate": 0.375,
          "total_trades": 24,
          "trade_count_long": 11,
          "trade_count_short": 13,
          "avg_profit_per_trade_pct": 0.9044419114156518,
          "avg_trade_duration": "1:49:00",
          "backtest_days": 153,
          "market_change": -0.3798385322447017,
          "best_pair": {
            "key": "SOL/USDT:USDT",
            "trades": 3,
            "profit_mean": 0.08568313580007804,
            "profit_mean_pct": 8.57,
            "profit_total_abs": 25.228887,
            "profit_total": 0.25228887,
            "profit_total_pct": 25.23,
            "duration_avg": "2:20:00",
            "wins": 2,
            "draws": 0,
            "losses": 1,
            "winrate": 0.6666666666666666,
            "cagr": 0.7103537654043419,
            "expectancy": 8.409628999999999,
            "expectancy_ratio": 52.89693637117297,
            "sortino": -100,
            "sharpe": 0.4910856044101486,
            "calmar": 1981.557941934795,
            "sqn": 1.8539,
            "profit_factor": 159.69080911351892,
            "max_drawdown_account": 0.0015898140000000184,
            "max_drawdown_abs": 0.1589814
          },
          "worst_pair": {
            "key": "ATOM/USDT:USDT",
            "trades": 3,
            "profit_mean": -0.0344300383159424,
            "profit_mean_pct": -3.44,
            "profit_total_abs": -10.198825639999999,
            "profit_total": -0.10198825639999999,
            "profit_total_pct": -10.2,
            "duration_avg": "1:45:00",
            "wins": 1,
            "draws": 0,
            "losses": 2,
            "winrate": 0.3333333333333333,
            "cagr": -0.2263427484927274,
            "expectancy": -3.399608546666667,
            "expectancy_ratio": -0.4296355012794574,
            "sortino": -0.7384528485791179,
            "sharpe": -0.1948449047051707,
            "calmar": -8.047230124289493,
            "sqn": -0.7356,
            "profit_factor": 0.355546748080814,
            "max_drawdown_account": 0.15825547639999996,
            "max_drawdown_abs": 15.82554764
          },
          "total_trades_count": 24,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 1.8229166666666667
        },
        "sideways_2023": {
          "total_profit_pct": -6.55282648,
          "total_profit_abs": -6.55282648,
          "max_drawdown_pct": 15.26862695063966,
          "max_drawdown_abs": 16.42882221,
          "sharpe_ratio": -0.44235381562227866,
          "sortino_ratio": -0.9795463952724308,
          "profit_factor": 0.6915343300838094,
          "calmar_ratio": -6.720711999226697,
          "sqn": -0.6016,
          "cagr": -0.18353086721789258,
          "expectancy": -0.3120393561904762,
          "expectancy_ratio": -0.22033262136870757,
          "win_rate": 0.2857142857142857,
          "total_trades": 21,
          "trade_count_long": 8,
          "trade_count_short": 13,
          "avg_profit_per_trade_pct": -0.30087096301513133,
          "avg_trade_duration": "2:19:00",
          "backtest_days": 122,
          "market_change": -0.054497021911408074,
          "best_pair": {
            "key": "DOT/USDT:USDT",
            "trades": 1,
            "profit_mean": 0.06603807451988644,
            "profit_mean_pct": 6.6,
            "profit_total_abs": 5.96199285,
            "profit_total": 0.059619928499999995,
            "profit_total_pct": 5.96,
            "duration_avg": "5:15:00",
            "wins": 1,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 0.18917071132530872,
            "expectancy": 5.96199285,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": -100,
            "calmar": -100,
            "sqn": -100.0,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "SOL/USDT:USDT",
            "trades": 3,
            "profit_mean": -0.016554117901612264,
            "profit_mean_pct": -1.66,
            "profit_total_abs": -4.76214208,
            "profit_total": -0.0476214208,
            "profit_total_pct": -4.76,
            "duration_avg": "1:45:00",
            "wins": 1,
            "draws": 0,
            "losses": 2,
            "winrate": 0.3333333333333333,
            "cagr": -0.1358233095361222,
            "expectancy": -1.5873806933333334,
            "expectancy_ratio": -0.6506714413649468,
            "sortino": -0.5990142644155781,
            "sharpe": -0.4729908443862897,
            "calmar": -15.659814077494085,
            "sqn": -1.4238,
            "profit_factor": 0.023992837952579817,
            "max_drawdown_account": 0.047621420800000036,
            "max_drawdown_abs": 4.76214208
          },
          "total_trades_count": 21,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 2.3095238095238098
        },
        "recovery_2024": {
          "total_profit_pct": -12.53819974,
          "total_profit_abs": -12.53819974,
          "max_drawdown_pct": 22.320663858881726,
          "max_drawdown_abs": 25.13159279,
          "sharpe_ratio": -0.38878780198555807,
          "sortino_ratio": -0.8176717507292492,
          "profit_factor": 0.7360706307861534,
          "calmar_ratio": -7.060426253808536,
          "sqn": -0.5948,
          "cagr": -0.27508408425152886,
          "expectancy": -0.48223845153846145,
          "expectancy_ratio": -0.18272033253266307,
          "win_rate": 0.3076923076923077,
          "total_trades": 26,
          "trade_count_long": 14,
          "trade_count_short": 12,
          "avg_profit_per_trade_pct": -0.4432975259998208,
          "avg_trade_duration": "1:48:00",
          "backtest_days": 152,
          "market_change": 0.26429653100850814,
          "best_pair": {
            "key": "BNB/USDT:USDT",
            "trades": 5,
            "profit_mean": 0.022671260555518897,
            "profit_mean_pct": 2.27,
            "profit_total_abs": 11.3154148,
            "profit_total": 0.113154148,
            "profit_total_pct": 11.32,
            "duration_avg": "1:36:00",
            "wins": 3,
            "draws": 0,
            "losses": 2,
            "winrate": 0.6,
            "cagr": 0.2935821034762034,
            "expectancy": 2.2630829599999998,
            "expectancy_ratio": 2.1179026401313705,
            "sortino": 2.361953270248099,
            "sharpe": 0.299854854181917,
            "calmar": 96.18361676715939,
            "sqn": 0.9543,
            "profit_factor": 6.2947566003284265,
            "max_drawdown_account": 0.014786732608483052,
            "max_drawdown_abs": 1.6706953999999996
          },
          "worst_pair": {
            "key": "DOT/USDT:USDT",
            "trades": 2,
            "profit_mean": -0.052069204943913164,
            "profit_mean_pct": -5.21,
            "profit_total_abs": -10.6964479,
            "profit_total": -0.106964479,
            "profit_total_pct": -10.7,
            "duration_avg": "3:08:00",
            "wins": 0,
            "draws": 0,
            "losses": 2,
            "winrate": 0.0,
            "cagr": -0.23788534293306152,
            "expectancy": -5.34822395,
            "expectancy_ratio": -1.0,
            "sortino": -0.5496560858758255,
            "sharpe": -0.5496560858758255,
            "calmar": -12.569061299041318,
            "sqn": -2.1865,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.10696447899999996,
            "max_drawdown_abs": 10.6964479
          },
          "total_trades_count": 26,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 1.7980769230769231
        },
        "recent_2025": {
          "total_profit_pct": -30.295220949999997,
          "total_profit_abs": -30.295220949999994,
          "max_drawdown_pct": 39.65448241980694,
          "max_drawdown_abs": 44.31200122999999,
          "sharpe_ratio": -0.4747034883870876,
          "sortino_ratio": -0.4657599522502181,
          "profit_factor": 0.6457912838483435,
          "calmar_ratio": -9.666100882862407,
          "sqn": -0.6846,
          "cagr": -0.5820432520555902,
          "expectancy": -1.0446627913793094,
          "expectancy_ratio": -0.18321140490602916,
          "win_rate": 0.4827586206896552,
          "total_trades": 29,
          "trade_count_long": 16,
          "trade_count_short": 13,
          "avg_profit_per_trade_pct": -0.8345157986183559,
          "avg_trade_duration": "1:40:00",
          "backtest_days": 151,
          "market_change": -0.2185757530104535,
          "best_pair": {
            "key": "SOL/USDT:USDT",
            "trades": 2,
            "profit_mean": 0.126761901736178,
            "profit_mean_pct": 12.68,
            "profit_total_abs": 20.207967500000002,
            "profit_total": 0.20207967500000001,
            "profit_total_pct": 20.21,
            "duration_avg": "2:22:00",
            "wins": 2,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 0.5603288694831217,
            "expectancy": 10.103983750000001,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": 2.903647508056741,
            "calmar": -100,
            "sqn": 11.4748,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "ADA/USDT:USDT",
            "trades": 1,
            "profit_mean": -0.3145083245472418,
            "profit_mean_pct": -31.45,
            "profit_total_abs": -34.77943575,
            "profit_total": -0.3477943575,
            "profit_total_pct": -34.78,
            "duration_avg": "0:30:00",
            "wins": 0,
            "draws": 0,
            "losses": 1,
            "winrate": 0.0,
            "cagr": -0.6441008943879867,
            "expectancy": -34.77943575,
            "expectancy_ratio": -1.0,
            "sortino": -100,
            "sharpe": -100,
            "calmar": -12.652300115591256,
            "sqn": -100.0,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.34779435750000004,
            "max_drawdown_abs": 34.77943575
          },
          "total_trades_count": 29,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 1.6724137931034482
        }
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 2,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": 37.462587
      },
      "weighted_norm": 2.015286,
      "mode": "explore"
    }
  },
  {
    "round": 3,
    "timestamp": "2026-02-28T14:58:06.145312+00:00",
    "changes_made": "[入场重构] 换用 MACD_CROSS+ATR_EXPANSION+RSI 组合替代旧的 BBANDS+ADX，引入新家族 volatility 因子 ATR_EXPANSION",
    "rationale": "上轮 BBANDS 突破策略在所有窗口均亏损，胜率低（40-59%）且盈亏比差。MACD_CROSS 提供趋势确认，ATR_EXPANSION 捕捉波动率扩张突破，RSI 过滤超买超卖。预期提高胜率至 50%+，盈亏比 1.5:1，在牛市和恢复窗口表现更好。",
    "backtest_metrics": {
      "total_profit_pct": -87.09280143999997,
      "total_profit_abs": -87.09280143999997,
      "max_drawdown_pct": 95.32667141572841,
      "max_drawdown_abs": 137.73446900999994,
      "sharpe_ratio": -0.18184110902112624,
      "sortino_ratio": -0.18987362511950906,
      "profit_factor": 0.7749412632330216,
      "calmar_ratio": -0.9574753350633691,
      "sqn": -1.0137,
      "cagr": -0.33630079369856614,
      "expectancy": -0.2982630186301367,
      "expectancy_ratio": -0.11638311387607458,
      "win_rate": 0.4828767123287671,
      "total_trades": 292,
      "trade_count_long": 145,
      "trade_count_short": 147,
      "avg_profit_per_trade_pct": -0.2827791981293183,
      "avg_trade_duration": "1:31:00",
      "backtest_days": 1823,
      "market_change": 7.828158636707855,
      "best_pair": {
        "key": "ETH/USDT:USDT",
        "trades": 53,
        "profit_mean": -0.003141502793740293,
        "profit_mean_pct": -0.31,
        "profit_total_abs": 13.740621210000006,
        "profit_total": 0.13740621210000006,
        "profit_total_pct": 13.74,
        "duration_avg": "1:38:00",
        "wins": 23,
        "draws": 0,
        "losses": 30,
        "winrate": 0.4339622641509434,
        "cagr": 0.026113468524358474,
        "expectancy": 0.25925700396226403,
        "expectancy_ratio": 0.17641491913333351,
        "sortino": 0.05244591521763417,
        "sharpe": 0.032843318040427755,
        "calmar": 0.9901978924145997,
        "sqn": 0.4264,
        "profit_factor": 1.3116663571355556,
        "max_drawdown_account": 0.14542669469999991,
        "max_drawdown_abs": 14.54266947
      },
      "worst_pair": {
        "key": "ATOM/USDT:USDT",
        "trades": 16,
        "profit_mean": -0.055891595029312395,
        "profit_mean_pct": -5.59,
        "profit_total_abs": -68.49393314999999,
        "profit_total": -0.6849393314999999,
        "profit_total_pct": -68.49,
        "duration_avg": "1:48:00",
        "wins": 7,
        "draws": 0,
        "losses": 9,
        "winrate": 0.4375,
        "cagr": -0.20646008537146499,
        "expectancy": -4.280870821875,
        "expectancy_ratio": -0.5340635044240963,
        "sortino": -0.07290917723834553,
        "sharpe": -0.08426155671560961,
        "calmar": -1.0079377777891292,
        "sqn": -1.9462,
        "profit_factor": 0.05055376991271762,
        "max_drawdown_account": 0.7121609334,
        "max_drawdown_abs": 71.21609334
      },
      "total_trades_count": 292,
      "stake_limit_hit_count": 0,
      "weekly_target_hit_rate": 0,
      "total_weeks": 0,
      "target_hit_weeks": 0,
      "monthly_net_profit_avg": 0,
      "max_monthly_loss": 0,
      "avg_trade_duration_hours": 1.5231164383561644
    },
    "eval_result": {
      "passed": false,
      "score": 6.57,
      "gate_failures": [
        "weekly_target_hit_rate=0.00% < 25.00%",
        "max_drawdown_pct=95.3% > 95.0%",
        "monthly_net_profit_avg=0.00 <= 0.0"
      ],
      "score_breakdown": {
        "monthly_profit_component": 0.0,
        "weekly_hit_rate_component": 0.0,
        "max_loss_penalty": 0.0,
        "trade_efficiency_component": 6.5655
      },
      "is_overfitting": false,
      "recommendation": "周达标率过低, 考虑: 1) 降低目标倍数 2) 增加杠杆(风险更高) 3) 优化入场时机 | 平均每笔亏损, 信号质量需要根本性改善"
    },
    "score": 6.57,
    "strategy_version_path": "results/strategy_versions/round_003_20260228_230113__入场重构__换用_MACD_CROSS_ATR_EXPANSION_RSI_组合替代旧的_BBAN.py",
    "next_action": "continue",
    "status": "success",
    "comparison_matrix": {
      "round": 3,
      "candidate_id": "round_3",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {
          "total_profit_pct": -0.6489044099999997,
          "total_profit_abs": -0.6489044099999997,
          "max_drawdown_pct": 39.99834661855437,
          "max_drawdown_abs": 55.15208296,
          "sharpe_ratio": -0.008335591824106663,
          "sortino_ratio": -0.01347086358818633,
          "profit_factor": 0.9938230982239138,
          "calmar_ratio": -0.2626655466901537,
          "sqn": -0.0107,
          "cagr": -0.01993604621726275,
          "expectancy": -0.02949565500000073,
          "expectancy_ratio": -0.002526914362944388,
          "win_rate": 0.5909090909090909,
          "total_trades": 22,
          "trade_count_long": 11,
          "trade_count_short": 11,
          "avg_profit_per_trade_pct": 0.7312420034028486,
          "avg_trade_duration": "1:28:00",
          "backtest_days": 118,
          "market_change": 6.433824368121245,
          "best_pair": {
            "key": "UNI/USDT:USDT",
            "trades": 2,
            "profit_mean": 0.12898705939977922,
            "profit_mean_pct": 12.9,
            "profit_total_abs": 20.35718055,
            "profit_total": 0.20357180549999998,
            "profit_total_pct": 20.36,
            "duration_avg": "0:52:00",
            "wins": 2,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 0.7738530712576417,
            "expectancy": 10.178590275,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": 0.8110847707489902,
            "calmar": -100,
            "sqn": 2.5048,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "AVAX/USDT:USDT",
            "trades": 3,
            "profit_mean": -0.08327590076551016,
            "profit_mean_pct": -8.33,
            "profit_total_abs": -23.001722599999997,
            "profit_total": -0.23001722599999996,
            "profit_total_pct": -23.0,
            "duration_avg": "3:40:00",
            "wins": 0,
            "draws": 0,
            "losses": 3,
            "winrate": 0.0,
            "cagr": -0.5544866226702938,
            "expectancy": -7.667240866666666,
            "expectancy_ratio": -1.0,
            "sortino": -0.6758683570388883,
            "sharpe": -0.6758683570388883,
            "calmar": -16.190655232663392,
            "sqn": -1.9678,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.23001722599999994,
            "max_drawdown_abs": 23.001722599999997
          },
          "total_trades_count": 22,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 1.4659090909090908
        },
        "bear_2022": {
          "total_profit_pct": -52.977120379999995,
          "total_profit_abs": -52.97712038,
          "max_drawdown_pct": 56.65900395692909,
          "max_drawdown_abs": 57.8896218,
          "sharpe_ratio": -1.035707510935767,
          "sortino_ratio": -1.6083499710894733,
          "profit_factor": 0.43126458291363046,
          "calmar_ratio": -11.675471122447563,
          "sqn": -1.6574,
          "cagr": -0.8347071665117852,
          "expectancy": -2.2073800158333334,
          "expectancy_ratio": -0.3317623266337155,
          "win_rate": 0.4166666666666667,
          "total_trades": 24,
          "trade_count_long": 14,
          "trade_count_short": 10,
          "avg_profit_per_trade_pct": -2.7287137173781866,
          "avg_trade_duration": "1:31:00",
          "backtest_days": 153,
          "market_change": -0.3798385322447017,
          "best_pair": {
            "key": "AVAX/USDT:USDT",
            "trades": 1,
            "profit_mean": 0.09568563982286572,
            "profit_mean_pct": 9.57,
            "profit_total_abs": 6.66822,
            "profit_total": 0.0666822,
            "profit_total_pct": 6.67,
            "duration_avg": "0:45:00",
            "wins": 1,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 0.16648993749168128,
            "expectancy": 6.66822,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": -100,
            "calmar": -100,
            "sqn": -100.0,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "ATOM/USDT:USDT",
            "trades": 2,
            "profit_mean": -0.11158815836289754,
            "profit_mean_pct": -11.16,
            "profit_total_abs": -17.8366958,
            "profit_total": -0.17836695800000002,
            "profit_total_pct": -17.84,
            "duration_avg": "1:15:00",
            "wins": 0,
            "draws": 0,
            "losses": 2,
            "winrate": 0.0,
            "cagr": -0.3741737082671587,
            "expectancy": -8.9183479,
            "expectancy_ratio": -1.0,
            "sortino": -1.204717894690701,
            "sharpe": -1.204717894690701,
            "calmar": -12.486910571596601,
            "sqn": -4.8239,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.17836695800000002,
            "max_drawdown_abs": 17.8366958
          },
          "total_trades_count": 24,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 1.5208333333333333
        },
        "sideways_2023": {
          "total_profit_pct": -15.496727119999997,
          "total_profit_abs": -15.49672712,
          "max_drawdown_pct": 19.612078449112204,
          "max_drawdown_abs": 20.616092379999998,
          "sharpe_ratio": -0.6319027501878653,
          "sortino_ratio": -1.1683266117902933,
          "profit_factor": 0.608304707802873,
          "calmar_ratio": -12.373796389736855,
          "sqn": -0.901,
          "cagr": -0.3957453699312933,
          "expectancy": -0.8156172168421048,
          "expectancy_ratio": -0.20615541694585637,
          "win_rate": 0.47368421052631576,
          "total_trades": 19,
          "trade_count_long": 8,
          "trade_count_short": 11,
          "avg_profit_per_trade_pct": -0.8079557763357734,
          "avg_trade_duration": "2:09:00",
          "backtest_days": 122,
          "market_change": -0.054497021911408074,
          "best_pair": {
            "key": "ADA/USDT:USDT",
            "trades": 3,
            "profit_mean": 0.022048486791111516,
            "profit_mean_pct": 2.2,
            "profit_total_abs": 6.2941446,
            "profit_total": 0.062941446,
            "profit_total_pct": 6.29,
            "duration_avg": "2:00:00",
            "wins": 2,
            "draws": 0,
            "losses": 1,
            "winrate": 0.6666666666666666,
            "cagr": 0.20035784243226473,
            "expectancy": 2.0980482,
            "expectancy_ratio": 1.5786482867469727,
            "sortino": -100,
            "sharpe": 0.33257316950724614,
            "calmar": 78.54063682163415,
            "sqn": 1.0011,
            "profit_factor": 5.735944860240918,
            "max_drawdown_account": 0.012549571559587037,
            "max_drawdown_abs": 1.3290156
          },
          "worst_pair": {
            "key": "BCH/USDT:USDT",
            "trades": 3,
            "profit_mean": -0.04300376665242223,
            "profit_mean_pct": -4.3,
            "profit_total_abs": -13.09580567,
            "profit_total": -0.13095805670000002,
            "profit_total_pct": -13.1,
            "duration_avg": "0:40:00",
            "wins": 1,
            "draws": 0,
            "losses": 2,
            "winrate": 0.3333333333333333,
            "cagr": -0.34291450688904324,
            "expectancy": -4.365268556666667,
            "expectancy_ratio": -0.6067392524432882,
            "sortino": -16.640030306393623,
            "sharpe": -0.5123621717465789,
            "calmar": -14.252135830169468,
            "sqn": -1.5424,
            "profit_factor": 0.08989112133506787,
            "max_drawdown_account": 0.14389273610000003,
            "max_drawdown_abs": 14.38927361
          },
          "total_trades_count": 19,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 2.144736842105263
        },
        "recovery_2024": {
          "total_profit_pct": -37.10011079999999,
          "total_profit_abs": -37.10011079999999,
          "max_drawdown_pct": 38.53308635,
          "max_drawdown_abs": 38.53308635,
          "sharpe_ratio": -1.1041846547127363,
          "sortino_ratio": -1.3740416319444897,
          "profit_factor": 0.4278015065770757,
          "calmar_ratio": -12.101640720155414,
          "sqn": -1.6591,
          "cagr": -0.6715307047776553,
          "expectancy": -1.3740781777777775,
          "expectancy_ratio": -0.3390805886950662,
          "win_rate": 0.4074074074074074,
          "total_trades": 27,
          "trade_count_long": 16,
          "trade_count_short": 11,
          "avg_profit_per_trade_pct": -1.625681258124289,
          "avg_trade_duration": "2:00:00",
          "backtest_days": 152,
          "market_change": 0.26429653100850814,
          "best_pair": {
            "key": "LINK/USDT:USDT",
            "trades": 3,
            "profit_mean": 0.03716327872047061,
            "profit_mean_pct": 3.72,
            "profit_total_abs": 8.67925697,
            "profit_total": 0.0867925697,
            "profit_total_pct": 8.68,
            "duration_avg": "1:55:00",
            "wins": 3,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 0.2212358553593421,
            "expectancy": 2.893085656666667,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": 0.8346959149204316,
            "calmar": -100,
            "sqn": 3.1305,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "XRP/USDT:USDT",
            "trades": 3,
            "profit_mean": -0.0659416522465589,
            "profit_mean_pct": -6.59,
            "profit_total_abs": -17.38141074,
            "profit_total": -0.1738141074,
            "profit_total_pct": -17.38,
            "duration_avg": "2:15:00",
            "wins": 0,
            "draws": 0,
            "losses": 3,
            "winrate": 0.0,
            "cagr": -0.36776643042125856,
            "expectancy": -5.79380358,
            "expectancy_ratio": -1.0,
            "sortino": -0.3622960027220468,
            "sharpe": -0.3622960027220468,
            "calmar": -12.569061299041312,
            "sqn": -1.3588,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.17381410740000006,
            "max_drawdown_abs": 17.38141074
          },
          "total_trades_count": 27,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 2.0
        },
        "recent_2025": {
          "total_profit_pct": -15.63771156999999,
          "total_profit_abs": -15.637711569999992,
          "max_drawdown_pct": 42.26336269038578,
          "max_drawdown_abs": 61.753405799999996,
          "sharpe_ratio": -0.1957931269401898,
          "sortino_ratio": -0.4892485883924728,
          "profit_factor": 0.8394597378632163,
          "calmar_ratio": -4.681431086166315,
          "sqn": -0.2976,
          "cagr": -0.3370444251094957,
          "expectancy": -0.6014504449999998,
          "expectancy_ratio": -0.0926193820019906,
          "win_rate": 0.4230769230769231,
          "total_trades": 26,
          "trade_count_long": 17,
          "trade_count_short": 9,
          "avg_profit_per_trade_pct": -0.2737964025228643,
          "avg_trade_duration": "1:22:00",
          "backtest_days": 151,
          "market_change": -0.2185757530104535,
          "best_pair": {
            "key": "XRP/USDT:USDT",
            "trades": 3,
            "profit_mean": 0.11001120116468634,
            "profit_mean_pct": 11.0,
            "profit_total_abs": 34.77062074,
            "profit_total": 0.34770620739999997,
            "profit_total_pct": 34.77,
            "duration_avg": "0:35:00",
            "wins": 2,
            "draws": 0,
            "losses": 1,
            "winrate": 0.6666666666666666,
            "cagr": 1.0571217209297994,
            "expectancy": 11.590206913333335,
            "expectancy_ratio": 2.108341395821608,
            "sortino": -100,
            "sharpe": 0.22632574558578022,
            "calmar": 112.25096075086589,
            "sqn": 0.8433,
            "profit_factor": 7.325024187464825,
            "max_drawdown_account": 0.03919149786025223,
            "max_drawdown_abs": 5.497310320000004
          },
          "worst_pair": {
            "key": "SOL/USDT:USDT",
            "trades": 3,
            "profit_mean": -0.08897627409973669,
            "profit_mean_pct": -8.9,
            "profit_total_abs": -31.22658775,
            "profit_total": -0.3122658775,
            "profit_total_pct": -31.23,
            "duration_avg": "1:00:00",
            "wins": 0,
            "draws": 0,
            "losses": 3,
            "winrate": 0.0,
            "cagr": -0.5954147983104963,
            "expectancy": -10.408862583333333,
            "expectancy_ratio": -1.0,
            "sortino": -1.282756256865364,
            "sharpe": -1.282756256865364,
            "calmar": -12.652300115591258,
            "sqn": -4.7793,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.31226587749999996,
            "max_drawdown_abs": 31.22658775
          },
          "total_trades_count": 26,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 1.3653846153846154
        }
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 3,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": 40.115773
      },
      "weighted_norm": 2.035611,
      "mode": "explore"
    }
  },
  {
    "round": 4,
    "timestamp": "2026-02-28T15:06:05.108543+00:00",
    "changes_made": "[入场重构] 换用 BBANDS_BREAKOUT+RSI+ADX 组合替代旧的 MACD+ATR+RSI，引入 volatility 家族新因子",
    "rationale": "上轮 MACD+ATR 趋势跟随策略在熊市和横盘市亏损严重（熊市-52.8%，横盘-23.3%），仅在近期窗口盈利（43.6%）。当前策略缺乏跨市况适应力，胜率普遍偏低（20-40%）。BBANDS_BREAKOUT 属于 volatility 家族（之前未使用），结合 RSI 动量过滤和 ADX 趋势强度确认，形成突破+动量+趋势三重验证，预期在单边市和波动市都能捕捉机会。调整 ROI 表为更激进止盈（最高 150%），降低止损至 -0.45 以容忍更大波动，杠杆保持 6x。",
    "backtest_metrics": {},
    "eval_result": {},
    "score": 0.0,
    "strategy_version_path": "results/strategy_versions/round_004_20260228_230946__入场重构__换用_BBANDS_BREAKOUT_RSI_ADX_组合替代旧的_MACD_ATR_.py",
    "next_action": "Backtest failed:  Strategy Parameter(default): rsi_oversold = 30\n2026-02-28 23:10:11,531 - freqtrade.strategy.hyper - INFO - Strategy Parameter(default): rsi_period = 14\n2026-02-28 23:10:11,550 - freqtrade - ERROR - Fatal exception!\nTraceback (most recent call last):\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/main.py\", line 53, in main\n    return_code = args[\"func\"](args)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/commands/optimize_commands.py\", line 61, in start_backtesting\n    backtesting.start()\n    ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/optimize/backtesting.py\", line 1846, in start\n    min_date, max_date = self.backtest_one_strategy(strat, data, timerange)\n                         ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/optimize/backtesting.py\", line 1756, in backtest_one_strategy\n    preprocessed = self.strategy.advise_all_indicators(data)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/strategy/interface.py\", line 1749, in advise_all_indicators\n    res[pair] = self.advise_indicators(pair_data.copy(), {\"pair\": pair}).copy()\n                ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/strategy/interface.py\", line 1811, in advise_indicators\n    dataframe = self.populate_indicators(dataframe, metadata)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/user_data/strategies/LotteryMindsetStrategy.py\", line 149, in populate_indicators\n    dataframe[\"bb_width\"] = (bb_upper - bb_lower) / bb_middle\n                             ~~~~~~~~~^~~~~~~~~~\nTypeError: unsupported operand type(s) for -: 'str' and 'str'\n",
    "status": "failed",
    "comparison_matrix": {
      "round": 4,
      "candidate_id": "round_4",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {
          "total_profit_pct": -34.39108168999999,
          "total_profit_abs": -34.39108168999999,
          "max_drawdown_pct": 49.82801530886105,
          "max_drawdown_abs": 52.22774878999999,
          "sharpe_ratio": -0.5701819267120619,
          "sortino_ratio": -1.0408013470560602,
          "profit_factor": 0.6975405349836838,
          "calmar_ratio": -11.17472055167593,
          "sqn": -0.6901,
          "cagr": -0.7284649790007847,
          "expectancy": -1.3756432675999992,
          "expectancy_ratio": -0.18147567900978967,
          "win_rate": 0.4,
          "total_trades": 25,
          "trade_count_long": 16,
          "trade_count_short": 9,
          "avg_profit_per_trade_pct": -0.7520439445202162,
          "avg_trade_duration": "1:04:00",
          "backtest_days": 118,
          "market_change": 6.433824368121245,
          "best_pair": {
            "key": "UNI/USDT:USDT",
            "trades": 2,
            "profit_mean": 0.09928481451582687,
            "profit_mean_pct": 9.93,
            "profit_total_abs": 9.29935475,
            "profit_total": 0.0929935475,
            "profit_total_pct": 9.3,
            "duration_avg": "1:08:00",
            "wins": 1,
            "draws": 0,
            "losses": 1,
            "winrate": 0.5,
            "cagr": 0.31659663225886625,
            "expectancy": 4.649677375,
            "expectancy_ratio": 1.9757414276988547,
            "sortino": -100,
            "sharpe": 0.2149954830551194,
            "calmar": 63.9770965695245,
            "sqn": 0.6639,
            "profit_factor": 4.9514828553977095,
            "max_drawdown_account": 0.023533835500000037,
            "max_drawdown_abs": 2.35338355
          },
          "worst_pair": {
            "key": "ATOM/USDT:USDT",
            "trades": 2,
            "profit_mean": -0.20489689914118464,
            "profit_mean_pct": -20.49,
            "profit_total_abs": -31.01555663,
            "profit_total": -0.31015556629999996,
            "profit_total_pct": -31.02,
            "duration_avg": "1:15:00",
            "wins": 0,
            "draws": 0,
            "losses": 2,
            "winrate": 0.0,
            "cagr": -0.6828813222767345,
            "expectancy": -15.507778315,
            "expectancy_ratio": -1.0,
            "sortino": -2.149181290164348,
            "sharpe": -2.149181290164348,
            "calmar": -16.190655232663392,
            "sqn": -6.6371,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.3101555662999999,
            "max_drawdown_abs": 31.01555663
          },
          "total_trades_count": 25,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 1.06
        },
        "bear_2022": {
          "total_profit_pct": -52.79807219,
          "total_profit_abs": -52.79807219,
          "max_drawdown_pct": 52.79807219,
          "max_drawdown_abs": 52.79807219,
          "sharpe_ratio": -0.856893997776359,
          "sortino_ratio": -1.3913487528132182,
          "profit_factor": 0.46940764938491897,
          "calmar_ratio": -12.486910571596601,
          "sqn": -1.3713,
          "cagr": -0.8332017353821383,
          "expectancy": -2.1999196745833345,
          "expectancy_ratio": -0.3979442629613108,
          "win_rate": 0.25,
          "total_trades": 24,
          "trade_count_long": 11,
          "trade_count_short": 13,
          "avg_profit_per_trade_pct": -2.620454760760349,
          "avg_trade_duration": "1:38:00",
          "backtest_days": 153,
          "market_change": -0.3798385322447017,
          "best_pair": {
            "key": "SOL/USDT:USDT",
            "trades": 5,
            "profit_mean": 0.04309435023881199,
            "profit_mean_pct": 4.31,
            "profit_total_abs": 15.186909450000002,
            "profit_total": 0.15186909450000002,
            "profit_total_pct": 15.19,
            "duration_avg": "1:36:00",
            "wins": 2,
            "draws": 0,
            "losses": 3,
            "winrate": 0.4,
            "cagr": 0.4011498402273892,
            "expectancy": 3.0373818900000003,
            "expectancy_ratio": 0.6313607597504305,
            "sortino": 0.3883803945333109,
            "sharpe": 0.18232711689459974,
            "calmar": 20.779055205259706,
            "sqn": 0.5841,
            "profit_factor": 2.0522679329173843,
            "max_drawdown_account": 0.09126381266511253,
            "max_drawdown_abs": 11.56815
          },
          "worst_pair": {
            "key": "ATOM/USDT:USDT",
            "trades": 2,
            "profit_mean": -0.1146630601951745,
            "profit_mean_pct": -11.47,
            "profit_total_abs": -19.74494528,
            "profit_total": -0.1974494528,
            "profit_total_pct": -19.74,
            "duration_avg": "0:52:00",
            "wins": 0,
            "draws": 0,
            "losses": 2,
            "winrate": 0.0,
            "cagr": -0.40829212677151705,
            "expectancy": -9.87247264,
            "expectancy_ratio": -1.0,
            "sortino": -0.946236707767045,
            "sharpe": -0.946236707767045,
            "calmar": -12.486910571596603,
            "sqn": -3.7889,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.19744945279999995,
            "max_drawdown_abs": 19.74494528
          },
          "total_trades_count": 24,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 1.625
        },
        "sideways_2023": {
          "total_profit_pct": -23.344423719999995,
          "total_profit_abs": -23.344423719999995,
          "max_drawdown_pct": 26.81888220153078,
          "max_drawdown_abs": 28.092176399999992,
          "sharpe_ratio": -1.7659656715568988,
          "sortino_ratio": -2.5833055211386458,
          "profit_factor": 0.1996837272224499,
          "calmar_ratio": -13.631042951543183,
          "sqn": -2.5181,
          "cagr": -0.548583300167203,
          "expectancy": -1.22865388,
          "expectancy_ratio": -0.631828636403329,
          "win_rate": 0.21052631578947367,
          "total_trades": 19,
          "trade_count_long": 7,
          "trade_count_short": 12,
          "avg_profit_per_trade_pct": -1.385746444195828,
          "avg_trade_duration": "2:13:00",
          "backtest_days": 122,
          "market_change": -0.054497021911408074,
          "best_pair": {
            "key": "UNI/USDT:USDT",
            "trades": 1,
            "profit_mean": 0.007317360010710136,
            "profit_mean_pct": 0.73,
            "profit_total_abs": 0.751868,
            "profit_total": 0.00751868,
            "profit_total_pct": 0.75,
            "duration_avg": "1:45:00",
            "wins": 1,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 0.0226632652784311,
            "expectancy": 0.751868,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": -100,
            "calmar": -100,
            "sqn": -100.0,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "SOL/USDT:USDT",
            "trades": 3,
            "profit_mean": -0.024831176852418396,
            "profit_mean_pct": -2.48,
            "profit_total_abs": -6.11470918,
            "profit_total": -0.061147091800000004,
            "profit_total_pct": -6.11,
            "duration_avg": "1:45:00",
            "wins": 1,
            "draws": 0,
            "losses": 2,
            "winrate": 0.3333333333333333,
            "cagr": -0.17202489700303703,
            "expectancy": -2.038236393333333,
            "expectancy_ratio": -0.6498621610544142,
            "sortino": -0.6425920546458903,
            "sharpe": -0.4853528342083853,
            "calmar": -15.659814077494087,
            "sqn": -1.461,
            "profit_factor": 0.025206758418378845,
            "max_drawdown_account": 0.06114709180000005,
            "max_drawdown_abs": 6.11470918
          },
          "total_trades_count": 19,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 2.223684210526316
        },
        "recovery_2024": {
          "total_profit_pct": -18.122710319999996,
          "total_profit_abs": -18.122710319999996,
          "max_drawdown_pct": 26.51034932195938,
          "max_drawdown_abs": 28.80552903,
          "sharpe_ratio": -0.3946091429512087,
          "sortino_ratio": -0.8211664643440002,
          "profit_factor": 0.7617344865346063,
          "calmar_ratio": -8.592321970203786,
          "sqn": -0.5729,
          "cagr": -0.3813029562660326,
          "expectancy": -0.6249210455172416,
          "expectancy_ratio": -0.15610499158077507,
          "win_rate": 0.3448275862068966,
          "total_trades": 29,
          "trade_count_long": 15,
          "trade_count_short": 14,
          "avg_profit_per_trade_pct": -0.5231411110855032,
          "avg_trade_duration": "2:17:00",
          "backtest_days": 152,
          "market_change": 0.26429653100850814,
          "best_pair": {
            "key": "BNB/USDT:USDT",
            "trades": 3,
            "profit_mean": 0.04777648168368618,
            "profit_mean_pct": 4.78,
            "profit_total_abs": 12.622305700000002,
            "profit_total": 0.12622305700000003,
            "profit_total_pct": 12.62,
            "duration_avg": "0:55:00",
            "wins": 1,
            "draws": 0,
            "losses": 2,
            "winrate": 0.3333333333333333,
            "cagr": 0.3303518604070306,
            "expectancy": 4.207435233333333,
            "expectancy_ratio": 2.6890267825012213,
            "sortino": 1.7349702117448136,
            "sharpe": 0.19354562482726567,
            "calmar": 73.65949511424245,
            "sqn": 0.7259,
            "profit_factor": 5.033540173751832,
            "max_drawdown_account": 0.021538368384480377,
            "max_drawdown_abs": 2.4790963999999995
          },
          "worst_pair": {
            "key": "DOT/USDT:USDT",
            "trades": 3,
            "profit_mean": -0.043579108720475795,
            "profit_mean_pct": -4.36,
            "profit_total_abs": -12.3577322,
            "profit_total": -0.12357732199999999,
            "profit_total_pct": -12.36,
            "duration_avg": "2:15:00",
            "wins": 1,
            "draws": 0,
            "losses": 2,
            "winrate": 0.3333333333333333,
            "cagr": -0.27148704490089226,
            "expectancy": -4.119244066666666,
            "expectancy_ratio": -0.5529299609105327,
            "sortino": -0.4385879468408481,
            "sharpe": -0.281031932430261,
            "calmar": -10.689708326047237,
            "sqn": -1.054,
            "profit_factor": 0.17060505863420103,
            "max_drawdown_account": 0.14530339725028932,
            "max_drawdown_abs": 14.899695649999998
          },
          "total_trades_count": 29,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 2.2758620689655173
        },
        "recent_2025": {
          "total_profit_pct": 43.62147478000001,
          "total_profit_abs": 43.62147478000001,
          "max_drawdown_pct": 28.412460948957136,
          "max_drawdown_abs": 54.24543164000001,
          "sharpe_ratio": 0.3553306497952572,
          "sortino_ratio": 0.4585270919237914,
          "profit_factor": 1.3737310499077087,
          "calmar_ratio": 19.42499776393051,
          "sqn": 0.5612,
          "cagr": 1.3990185464058862,
          "expectancy": 1.817561449166667,
          "expectancy_ratio": 0.14014914371539078,
          "win_rate": 0.625,
          "total_trades": 24,
          "trade_count_long": 13,
          "trade_count_short": 11,
          "avg_profit_per_trade_pct": 2.1413110264222284,
          "avg_trade_duration": "1:39:00",
          "backtest_days": 151,
          "market_change": -0.2185757530104535,
          "best_pair": {
            "key": "SOL/USDT:USDT",
            "trades": 2,
            "profit_mean": 0.2275678782383958,
            "profit_mean_pct": 22.76,
            "profit_total_abs": 51.6762545,
            "profit_total": 0.516762545,
            "profit_total_pct": 51.68,
            "duration_avg": "1:38:00",
            "wins": 2,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 1.7372682938150676,
            "expectancy": 25.83812725,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": 1.0729635023495232,
            "calmar": -100,
            "sqn": 4.2402,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "BNB/USDT:USDT",
            "trades": 1,
            "profit_mean": -0.1470751820061254,
            "profit_mean_pct": -14.71,
            "profit_total_abs": -22.9347613,
            "profit_total": -0.229347613,
            "profit_total_pct": -22.93,
            "duration_avg": "2:30:00",
            "wins": 0,
            "draws": 0,
            "losses": 1,
            "winrate": 0.0,
            "cagr": -0.4672636440457568,
            "expectancy": -22.9347613,
            "expectancy_ratio": -1.0,
            "sortino": -100,
            "sharpe": -100,
            "calmar": -12.652300115591254,
            "sqn": -100.0,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.22934761300000006,
            "max_drawdown_abs": 22.9347613
          },
          "total_trades_count": 24,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 1.65625
        }
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 4,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": 45.326671
      },
      "weighted_norm": 2.078895,
      "mode": "explore"
    }
  },
  {
    "round": 5,
    "timestamp": "2026-02-28T15:10:12.583990+00:00",
    "changes_made": "[入场优化] 引入 MACD_CROSS 作为新因子家族（trend），调整入场条件为 MACD 金叉 + 布林带突破 + RSI 动量 + ADX 趋势确认，优化出场逻辑",
    "rationale": "当前策略在熊市和横盘窗口表现不佳，胜率低且回撤大。引入 MACD_CROSS（trend 家族，之前未使用）以增强趋势确认，结合布林带突破和 RSI 动量，提高跨市况适应性。调整参数以降低假信号，优化出场条件减少过早止损。",
    "backtest_metrics": {},
    "eval_result": {},
    "score": 0.0,
    "strategy_version_path": "results/strategy_versions/round_005_20260228_231247__入场优化__引入_MACD_CROSS_作为新因子家族_trend__调整入场条件为_MACD_金.py",
    "next_action": "Backtest failed:  Strategy Parameter(default): rsi_oversold = 30\n2026-02-28 23:13:28,152 - freqtrade.strategy.hyper - INFO - Strategy Parameter(default): rsi_period = 14\n2026-02-28 23:13:28,183 - freqtrade - ERROR - Fatal exception!\nTraceback (most recent call last):\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/main.py\", line 53, in main\n    return_code = args[\"func\"](args)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/commands/optimize_commands.py\", line 61, in start_backtesting\n    backtesting.start()\n    ~~~~~~~~~~~~~~~~~^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/optimize/backtesting.py\", line 1846, in start\n    min_date, max_date = self.backtest_one_strategy(strat, data, timerange)\n                         ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/optimize/backtesting.py\", line 1756, in backtest_one_strategy\n    preprocessed = self.strategy.advise_all_indicators(data)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/strategy/interface.py\", line 1749, in advise_all_indicators\n    res[pair] = self.advise_indicators(pair_data.copy(), {\"pair\": pair}).copy()\n                ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/strategy/interface.py\", line 1811, in advise_indicators\n    dataframe = self.populate_indicators(dataframe, metadata)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/user_data/strategies/LotteryMindsetStrategy.py\", line 152, in populate_indicators\n    dataframe[\"bb_width\"] = (bb_upper - bb_lower) / bb_middle\n                             ~~~~~~~~~^~~~~~~~~~\nTypeError: unsupported operand type(s) for -: 'str' and 'str'\n",
    "status": "failed",
    "comparison_matrix": {
      "round": 5,
      "candidate_id": "round_5",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {},
        "bear_2022": {},
        "sideways_2023": {},
        "recovery_2024": {},
        "recent_2025": {}
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 5,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": -50.0
      },
      "weighted_norm": 1.870829,
      "mode": "explore"
    }
  },
  {
    "round": 6,
    "timestamp": "2026-02-28T15:13:29.171468+00:00",
    "changes_made": "[入场重构+出场优化] 引入新家族因子STOCH(动量)和ATR_EXPANSION(波动率)，替换MACD和BBANDS，优化出场逻辑",
    "rationale": "上轮MACD+BBANDS组合在熊市和横盘窗口表现不佳，胜率低导致滚仓中断。引入STOCH提供更灵敏的超买超卖信号，ATR_EXPANSION过滤低波动假突破，ADX保留趋势确认。出场改用STOCH反转+ATR止损，提高盈亏比。",
    "backtest_metrics": {},
    "eval_result": {},
    "score": 0.0,
    "strategy_version_path": "results/strategy_versions/round_006_20260228_231620__入场重构_出场优化__引入新家族因子STOCH_动量_和ATR_EXPANSION_波动率__替换.py",
    "next_action": "Backtest failed: timize/backtesting.py\", line 487, in _get_ohlcv_as_lists\n    df_analyzed = self.strategy.ft_advise_signals(pair_data, {\"pair\": pair})\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/strategy/interface.py\", line 1763, in ft_advise_signals\n    dataframe = self.advise_entry(dataframe, metadata)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/strategy/interface.py\", line 1832, in advise_entry\n    df = self.populate_entry_trend(dataframe, metadata)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/user_data/strategies/LotteryMindsetStrategy.py\", line 163, in populate_entry_trend\n    & (dataframe[\"stoch_k\"] < int(self.stoch_overbought.value))\n       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/common.py\", line 76, in new_method\n    return method(self, other)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/arraylike.py\", line 48, in __lt__\n    return self._cmp_method(other, operator.lt)\n           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/series.py\", line 6138, in _cmp_method\n    res_values = ops.comparison_op(lvalues, rvalues, op)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/array_ops.py\", line 344, in comparison_op\n    res_values = comp_method_OBJECT_ARRAY(op, lvalues, rvalues)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/array_ops.py\", line 129, in comp_method_OBJECT_ARRAY\n    result = libops.scalar_compare(x.ravel(), y, op)\n  File \"pandas/_libs/ops.pyx\", line 107, in pandas._libs.ops.scalar_compare\nTypeError: '<' not supported between instances of 'str' and 'int'\n",
    "status": "failed",
    "comparison_matrix": {
      "round": 6,
      "candidate_id": "round_6",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {},
        "bear_2022": {},
        "sideways_2023": {},
        "recovery_2024": {},
        "recent_2025": {}
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 6,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": -50.0
      },
      "weighted_norm": 1.870829,
      "mode": "explore"
    }
  },
  {
    "round": 7,
    "timestamp": "2026-02-28T15:16:42.054842+00:00",
    "changes_made": "[入场优化] 引入 OBV_TREND 因子（volume 家族）增强量价确认，调整 STOCH 参数以降低假信号，优化 ROI 表提高盈亏比",
    "rationale": "当前策略在横盘和恢复窗口表现不佳，胜率低且盈亏比不足。STOCH 在震荡市易产生假信号，ATR_EXPANSION 和 ADX 已提供趋势和波动过滤，但缺乏量能确认。引入 OBV_TREND（volume 家族，新家族因子）以增强入场可靠性，避免在低量能时开仓。调整 STOCH 参数减少过度交易，优化 ROI 表以捕捉更大利润，目标提升胜率和跨市况稳健性。",
    "backtest_metrics": {},
    "eval_result": {},
    "score": 0.0,
    "strategy_version_path": "results/strategy_versions/round_007_20260228_232023__入场优化__引入_OBV_TREND_因子_volume_家族_增强量价确认_调整_STOCH_参.py",
    "next_action": "Backtest failed: timize/backtesting.py\", line 487, in _get_ohlcv_as_lists\n    df_analyzed = self.strategy.ft_advise_signals(pair_data, {\"pair\": pair})\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/strategy/interface.py\", line 1763, in ft_advise_signals\n    dataframe = self.advise_entry(dataframe, metadata)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/strategy/interface.py\", line 1832, in advise_entry\n    df = self.populate_entry_trend(dataframe, metadata)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/user_data/strategies/LotteryMindsetStrategy.py\", line 167, in populate_entry_trend\n    & (dataframe[\"stoch_k\"] < int(self.stoch_overbought.value))\n       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/common.py\", line 76, in new_method\n    return method(self, other)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/arraylike.py\", line 48, in __lt__\n    return self._cmp_method(other, operator.lt)\n           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/series.py\", line 6138, in _cmp_method\n    res_values = ops.comparison_op(lvalues, rvalues, op)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/array_ops.py\", line 344, in comparison_op\n    res_values = comp_method_OBJECT_ARRAY(op, lvalues, rvalues)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/array_ops.py\", line 129, in comp_method_OBJECT_ARRAY\n    result = libops.scalar_compare(x.ravel(), y, op)\n  File \"pandas/_libs/ops.pyx\", line 107, in pandas._libs.ops.scalar_compare\nTypeError: '<' not supported between instances of 'str' and 'int'\n",
    "status": "failed",
    "comparison_matrix": {
      "round": 7,
      "candidate_id": "round_7",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {},
        "bear_2022": {},
        "sideways_2023": {},
        "recovery_2024": {},
        "recent_2025": {}
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 7,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": -50.0
      },
      "weighted_norm": 1.870829,
      "mode": "explore"
    }
  },
  {
    "round": 8,
    "timestamp": "2026-02-28T15:20:51.033874+00:00",
    "changes_made": "[参数优化] 调整 STOCH 超买超卖阈值、ATR 乘数、ADX 阈值，并引入新的 VOLUME 家族因子 OBV_TREND 替代 OBV_rising 以增强量价确认",
    "rationale": "当前策略在牛市和恢复窗口表现尚可，但在熊市和横盘窗口亏损严重，胜率低且盈亏比不足。STOCH 参数过于宽松导致频繁交易，ATR 乘数过低未能有效过滤低波动噪音，ADX 阈值偏高在横盘市失效。引入 OBV_TREND（VOLUME 家族新因子）替代 OBV_rising，提供更稳健的量价趋势确认，预期提升胜率和跨市况适应力。",
    "backtest_metrics": {},
    "eval_result": {},
    "score": 0.0,
    "strategy_version_path": "results/strategy_versions/round_008_20260228_232335__参数优化__调整_STOCH_超买超卖阈值_ATR_乘数_ADX_阈值_并引入新的_VOLUME_.py",
    "next_action": "Backtest failed: timize/backtesting.py\", line 487, in _get_ohlcv_as_lists\n    df_analyzed = self.strategy.ft_advise_signals(pair_data, {\"pair\": pair})\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/strategy/interface.py\", line 1763, in ft_advise_signals\n    dataframe = self.advise_entry(dataframe, metadata)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/strategy/interface.py\", line 1832, in advise_entry\n    df = self.populate_entry_trend(dataframe, metadata)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/user_data/strategies/LotteryMindsetStrategy.py\", line 167, in populate_entry_trend\n    & (dataframe[\"stoch_k\"] < int(self.stoch_overbought.value))\n       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/common.py\", line 76, in new_method\n    return method(self, other)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/arraylike.py\", line 48, in __lt__\n    return self._cmp_method(other, operator.lt)\n           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/series.py\", line 6138, in _cmp_method\n    res_values = ops.comparison_op(lvalues, rvalues, op)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/array_ops.py\", line 344, in comparison_op\n    res_values = comp_method_OBJECT_ARRAY(op, lvalues, rvalues)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/array_ops.py\", line 129, in comp_method_OBJECT_ARRAY\n    result = libops.scalar_compare(x.ravel(), y, op)\n  File \"pandas/_libs/ops.pyx\", line 107, in pandas._libs.ops.scalar_compare\nTypeError: '<' not supported between instances of 'str' and 'int'\n",
    "status": "failed",
    "comparison_matrix": {
      "round": 8,
      "candidate_id": "round_8",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {},
        "bear_2022": {},
        "sideways_2023": {},
        "recovery_2024": {},
        "recent_2025": {}
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 8,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": -50.0
      },
      "weighted_norm": 1.870829,
      "mode": "explore"
    }
  },
  {
    "round": 9,
    "timestamp": "2026-02-28T15:23:57.342139+00:00",
    "changes_made": "[入场优化] 引入 BBANDS_BREAKOUT 因子（volatility 家族）替代部分条件，调整参数范围，简化入场逻辑以提高信号频率",
    "rationale": "上轮策略在多个窗口信号稀疏，导致交易笔数不足。引入 BBANDS_BREAKOUT 作为新家族因子（volatility），结合现有动量因子，增强突破信号。移除冗余的 volume_ma 条件，放宽 STOCH 和 ATR 参数以捕捉更多日常波动机会，预期提升交易频率和跨市况适应力。",
    "backtest_metrics": {},
    "eval_result": {},
    "score": 0.0,
    "strategy_version_path": "results/strategy_versions/round_009_20260228_232637__入场优化__引入_BBANDS_BREAKOUT_因子_volatility_家族_替代部分条件_.py",
    "next_action": "Backtest failed: st_one_strategy\n    preprocessed = self.strategy.advise_all_indicators(data)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/strategy/interface.py\", line 1749, in advise_all_indicators\n    res[pair] = self.advise_indicators(pair_data.copy(), {\"pair\": pair}).copy()\n                ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/strategy/interface.py\", line 1811, in advise_indicators\n    dataframe = self.populate_indicators(dataframe, metadata)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/user_data/strategies/LotteryMindsetStrategy.py\", line 171, in populate_indicators\n    dataframe[\"bbands_breakout_long\"] = dataframe[\"close\"] > bbands_upper\n                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/common.py\", line 76, in new_method\n    return method(self, other)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/arraylike.py\", line 56, in __gt__\n    return self._cmp_method(other, operator.gt)\n           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/series.py\", line 6138, in _cmp_method\n    res_values = ops.comparison_op(lvalues, rvalues, op)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/array_ops.py\", line 341, in comparison_op\n    return invalid_comparison(lvalues, rvalues, op)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/invalid.py\", line 40, in invalid_comparison\n    raise TypeError(f\"Invalid comparison between dtype={left.dtype} and {typ}\")\nTypeError: Invalid comparison between dtype=float64 and str\n",
    "status": "failed",
    "comparison_matrix": {
      "round": 9,
      "candidate_id": "round_9",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {},
        "bear_2022": {},
        "sideways_2023": {},
        "recovery_2024": {},
        "recent_2025": {}
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 9,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": -50.0
      },
      "weighted_norm": 1.870829,
      "mode": "explore"
    }
  },
  {
    "round": 10,
    "timestamp": "2026-02-28T15:26:59.737187+00:00",
    "changes_made": "[入场优化] 引入 MACD_CROSS 作为新因子（trend 家族），替换 OBV_TREND 并简化入场条件，调整出场参数以提升盈亏比",
    "rationale": "当前策略在多个窗口表现不佳，入场条件过于严格（7个条件），导致信号稀少。引入 MACD_CROSS（trend 家族）增强趋势确认，简化入场为 4 个核心条件（动量+趋势+波动+突破），并调整 ROI 和 trailing stop 以捕捉更大利润。",
    "backtest_metrics": {},
    "eval_result": {},
    "score": 0.0,
    "strategy_version_path": "results/strategy_versions/round_010_20260228_232938__入场优化__引入_MACD_CROSS_作为新因子_trend_家族__替换_OBV_TREND_.py",
    "next_action": "Backtest failed: st_one_strategy\n    preprocessed = self.strategy.advise_all_indicators(data)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/strategy/interface.py\", line 1749, in advise_all_indicators\n    res[pair] = self.advise_indicators(pair_data.copy(), {\"pair\": pair}).copy()\n                ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/strategy/interface.py\", line 1811, in advise_indicators\n    dataframe = self.populate_indicators(dataframe, metadata)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/user_data/strategies/LotteryMindsetStrategy.py\", line 181, in populate_indicators\n    dataframe[\"bbands_breakout_long\"] = dataframe[\"close\"] > bbands_upper\n                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/common.py\", line 76, in new_method\n    return method(self, other)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/arraylike.py\", line 56, in __gt__\n    return self._cmp_method(other, operator.gt)\n           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/series.py\", line 6138, in _cmp_method\n    res_values = ops.comparison_op(lvalues, rvalues, op)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/array_ops.py\", line 341, in comparison_op\n    return invalid_comparison(lvalues, rvalues, op)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/invalid.py\", line 40, in invalid_comparison\n    raise TypeError(f\"Invalid comparison between dtype={left.dtype} and {typ}\")\nTypeError: Invalid comparison between dtype=float64 and str\n",
    "status": "failed",
    "comparison_matrix": {
      "round": 10,
      "candidate_id": "round_10",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {},
        "bear_2022": {},
        "sideways_2023": {},
        "recovery_2024": {},
        "recent_2025": {}
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 10,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": -50.0
      },
      "weighted_norm": 1.870829,
      "mode": "explore"
    }
  },
  {
    "round": 11,
    "timestamp": "2026-02-28T15:30:00.760854+00:00",
    "changes_made": "[参数优化] 调整入场条件参数以降低信号频率、提高胜率，并引入新的出场逻辑",
    "rationale": "当前策略在多个窗口表现不佳，胜率低且亏损严重。入场条件过于严格（需要6个因子同时满足），导致信号稀少且可能错过机会。出场逻辑仅基于STOCH，缺乏趋势确认。调整参数以放宽入场条件（如降低ADX阈值、调整STOCH参数），并引入MACD交叉作为出场信号，以提高跨市况适应力。",
    "backtest_metrics": {},
    "eval_result": {},
    "score": 0.0,
    "strategy_version_path": "results/strategy_versions/round_011_20260228_233249__参数优化__调整入场条件参数以降低信号频率_提高胜率_并引入新的出场逻辑.py",
    "next_action": "Backtest failed: st_one_strategy\n    preprocessed = self.strategy.advise_all_indicators(data)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/strategy/interface.py\", line 1749, in advise_all_indicators\n    res[pair] = self.advise_indicators(pair_data.copy(), {\"pair\": pair}).copy()\n                ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/strategy/interface.py\", line 1811, in advise_indicators\n    dataframe = self.populate_indicators(dataframe, metadata)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/user_data/strategies/LotteryMindsetStrategy.py\", line 181, in populate_indicators\n    dataframe[\"bbands_breakout_long\"] = dataframe[\"close\"] > bbands_upper\n                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/common.py\", line 76, in new_method\n    return method(self, other)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/arraylike.py\", line 56, in __gt__\n    return self._cmp_method(other, operator.gt)\n           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/series.py\", line 6138, in _cmp_method\n    res_values = ops.comparison_op(lvalues, rvalues, op)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/array_ops.py\", line 341, in comparison_op\n    return invalid_comparison(lvalues, rvalues, op)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/invalid.py\", line 40, in invalid_comparison\n    raise TypeError(f\"Invalid comparison between dtype={left.dtype} and {typ}\")\nTypeError: Invalid comparison between dtype=float64 and str\n",
    "status": "failed",
    "comparison_matrix": {
      "round": 11,
      "candidate_id": "round_11",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {},
        "bear_2022": {},
        "sideways_2023": {},
        "recovery_2024": {},
        "recent_2025": {}
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 11,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": -50.0
      },
      "weighted_norm": 1.870829,
      "mode": "explore"
    }
  },
  {
    "round": 12,
    "timestamp": "2026-02-28T15:33:07.821345+00:00",
    "changes_made": "[入场优化] 引入 RSI 动量确认因子，调整参数范围以提升胜率，优化出场逻辑",
    "rationale": "当前策略在多个窗口表现不佳，胜率低导致滚仓失败。引入 RSI 作为动量确认，与 STOCH 和 MACD 形成多动量共振，提高入场准确性。调整参数范围以适配不同市况，优化出场逻辑减少过早离场。",
    "backtest_metrics": {},
    "eval_result": {},
    "score": 0.0,
    "strategy_version_path": "results/strategy_versions/round_012_20260228_233603__入场优化__引入_RSI_动量确认因子_调整参数范围以提升胜率_优化出场逻辑.py",
    "next_action": "Backtest failed: st_one_strategy\n    preprocessed = self.strategy.advise_all_indicators(data)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/strategy/interface.py\", line 1749, in advise_all_indicators\n    res[pair] = self.advise_indicators(pair_data.copy(), {\"pair\": pair}).copy()\n                ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/strategy/interface.py\", line 1811, in advise_indicators\n    dataframe = self.populate_indicators(dataframe, metadata)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/user_data/strategies/LotteryMindsetStrategy.py\", line 184, in populate_indicators\n    dataframe[\"bbands_breakout_long\"] = dataframe[\"close\"] > bbands_upper\n                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/common.py\", line 76, in new_method\n    return method(self, other)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/arraylike.py\", line 56, in __gt__\n    return self._cmp_method(other, operator.gt)\n           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/series.py\", line 6138, in _cmp_method\n    res_values = ops.comparison_op(lvalues, rvalues, op)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/array_ops.py\", line 341, in comparison_op\n    return invalid_comparison(lvalues, rvalues, op)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/invalid.py\", line 40, in invalid_comparison\n    raise TypeError(f\"Invalid comparison between dtype={left.dtype} and {typ}\")\nTypeError: Invalid comparison between dtype=float64 and str\n",
    "status": "failed",
    "comparison_matrix": {
      "round": 12,
      "candidate_id": "round_12",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {},
        "bear_2022": {},
        "sideways_2023": {},
        "recovery_2024": {},
        "recent_2025": {}
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 12,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": -50.0
      },
      "weighted_norm": 1.870829,
      "mode": "explore"
    }
  },
  {
    "round": 13,
    "timestamp": "2026-02-28T15:36:29.726919+00:00",
    "changes_made": "[参数优化] 调整入场条件参数以降低信号频率、提高胜率，并引入新的出场逻辑",
    "rationale": "当前策略在多个窗口表现不佳，胜率低且亏损严重。基于目标差距，需要减少交易频率、提高入场质量。调整了STOCH、ATR_EXPANSION、ADX、MACD_CROSS、BBANDS_BREAKOUT、RSI_TREND的参数，使入场条件更严格，同时优化出场条件以锁定利润。",
    "backtest_metrics": {},
    "eval_result": {},
    "score": 0.0,
    "strategy_version_path": "results/strategy_versions/round_013_20260228_233916__参数优化__调整入场条件参数以降低信号频率_提高胜率_并引入新的出场逻辑.py",
    "next_action": "Backtest failed: st_one_strategy\n    preprocessed = self.strategy.advise_all_indicators(data)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/strategy/interface.py\", line 1749, in advise_all_indicators\n    res[pair] = self.advise_indicators(pair_data.copy(), {\"pair\": pair}).copy()\n                ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/strategy/interface.py\", line 1811, in advise_indicators\n    dataframe = self.populate_indicators(dataframe, metadata)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/user_data/strategies/LotteryMindsetStrategy.py\", line 184, in populate_indicators\n    dataframe[\"bbands_breakout_long\"] = dataframe[\"close\"] > bbands_upper\n                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/common.py\", line 76, in new_method\n    return method(self, other)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/arraylike.py\", line 56, in __gt__\n    return self._cmp_method(other, operator.gt)\n           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/series.py\", line 6138, in _cmp_method\n    res_values = ops.comparison_op(lvalues, rvalues, op)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/array_ops.py\", line 341, in comparison_op\n    return invalid_comparison(lvalues, rvalues, op)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/invalid.py\", line 40, in invalid_comparison\n    raise TypeError(f\"Invalid comparison between dtype={left.dtype} and {typ}\")\nTypeError: Invalid comparison between dtype=float64 and str\n",
    "status": "failed",
    "comparison_matrix": {
      "round": 13,
      "candidate_id": "round_13",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {},
        "bear_2022": {},
        "sideways_2023": {},
        "recovery_2024": {},
        "recent_2025": {}
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 13,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": -50.0
      },
      "weighted_norm": 1.870829,
      "mode": "explore"
    }
  },
  {
    "round": 14,
    "timestamp": "2026-02-28T15:39:43.467398+00:00",
    "changes_made": "[入场简化+新家族引入] 移除STOCH、ATR_EXPANSION、MACD_CROSS、BBANDS_BREAKOUT、RSI_TREND，保留ADX，新增OBV_TREND（volume家族）和DEMA_CROSS（overlap家族），简化入场条件为ADX>25 + OBV_TREND>0 + DEMA_CROSS金叉，出场改用固定ROI 1.5和stoploss -0.3，杠杆调至3x",
    "rationale": "上轮入场条件过于复杂（7个因子），导致信号稀少，在多个窗口交易笔数不足。根据因子家族硬约束，本轮引入新家族：volume（OBV_TREND）和overlap（DEMA_CROSS），以增强量价确认和趋势跟随。简化入场逻辑，移除矛盾因子（如STOCH超买/超卖与突破逻辑冲突），预期提高信号频率和跨市况适应性，降低杠杆以控制风险。",
    "backtest_metrics": {
      "total_profit_pct": -87.32762113999999,
      "total_profit_abs": -87.32762113999999,
      "max_drawdown_pct": 91.80465676780216,
      "max_drawdown_abs": 109.10662326000005,
      "sharpe_ratio": -0.320029823568777,
      "sortino_ratio": -0.363718360366269,
      "profit_factor": 0.6639696549638804,
      "calmar_ratio": -0.9968887206947505,
      "sqn": -1.6887,
      "cagr": -0.3387361518476921,
      "expectancy": -0.2678761384662577,
      "expectancy_ratio": -0.2216151048551097,
      "win_rate": 0.34049079754601225,
      "total_trades": 326,
      "trade_count_long": 120,
      "trade_count_short": 206,
      "avg_profit_per_trade_pct": -0.4732528371039225,
      "avg_trade_duration": "3:40:00",
      "backtest_days": 1823,
      "market_change": 7.828158636707855,
      "best_pair": {
        "key": "ETH/USDT:USDT",
        "trades": 38,
        "profit_mean": 0.011400475950373802,
        "profit_mean_pct": 1.14,
        "profit_total_abs": 6.87391405,
        "profit_total": 0.0687391405,
        "profit_total_pct": 6.87,
        "duration_avg": "3:40:00",
        "wins": 14,
        "draws": 0,
        "losses": 24,
        "winrate": 0.3684210526315789,
        "cagr": 0.013399481999848861,
        "expectancy": 0.18089247499999994,
        "expectancy_ratio": 0.2754128063566008,
        "sortino": 0.10211919296812116,
        "sharpe": 0.03501794883753046,
        "calmar": 1.2198398275261206,
        "sqn": 0.5349,
        "profit_factor": 1.436070276731285,
        "max_drawdown_account": 0.05905559536778371,
        "max_drawdown_abs": 6.10057016
      },
      "worst_pair": {
        "key": "SOL/USDT:USDT",
        "trades": 38,
        "profit_mean": -0.018492289503822198,
        "profit_mean_pct": -1.85,
        "profit_total_abs": -24.60166216,
        "profit_total": -0.2460166216,
        "profit_total_pct": -24.6,
        "duration_avg": "3:56:00",
        "wins": 11,
        "draws": 0,
        "losses": 27,
        "winrate": 0.2894736842105263,
        "cagr": -0.05497032668766377,
        "expectancy": -0.6474121621052635,
        "expectancy_ratio": -0.4152988309767812,
        "sortino": -0.1111033271765423,
        "sharpe": -0.10314932951276762,
        "calmar": -0.9296230133149985,
        "sqn": -1.5755,
        "profit_factor": 0.4155053489956411,
        "max_drawdown_account": 0.2773430884608841,
        "max_drawdown_abs": 28.421285609999998
      },
      "total_trades_count": 326,
      "stake_limit_hit_count": 0,
      "weekly_target_hit_rate": 0,
      "total_weeks": 0,
      "target_hit_weeks": 0,
      "monthly_net_profit_avg": 0,
      "max_monthly_loss": 0,
      "avg_trade_duration_hours": 3.673312883435583
    },
    "eval_result": {
      "passed": false,
      "score": 2.72,
      "gate_failures": [
        "weekly_target_hit_rate=0.00% < 25.00%",
        "monthly_net_profit_avg=0.00 <= 0.0"
      ],
      "score_breakdown": {
        "monthly_profit_component": 0.0,
        "weekly_hit_rate_component": 0.0,
        "max_loss_penalty": 0.0,
        "trade_efficiency_component": 2.7223
      },
      "is_overfitting": false,
      "recommendation": "周达标率过低, 考虑: 1) 降低目标倍数 2) 增加杠杆(风险更高) 3) 优化入场时机 | 平均每笔亏损, 信号质量需要根本性改善"
    },
    "score": 2.72,
    "strategy_version_path": "results/strategy_versions/round_014_20260228_234226__入场简化_新家族引入__移除STOCH_ATR_EXPANSION_MACD_CROSS_BBAN.py",
    "next_action": "continue",
    "status": "success",
    "comparison_matrix": {
      "round": 14,
      "candidate_id": "round_14",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {},
        "bear_2022": {},
        "sideways_2023": {},
        "recovery_2024": {},
        "recent_2025": {}
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 14,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": -50.0
      },
      "weighted_norm": 1.870829,
      "mode": "explore"
    }
  },
  {
    "round": 15,
    "timestamp": "2026-02-28T15:44:23.281916+00:00",
    "changes_made": "[入场重构] 换用 RSI+BBANDS_BREAKOUT+ADX 组合替代旧的 DEMA_CROSS+OBV_TREND+ADX，引入 volatility 家族新因子 BBANDS_BREAKOUT，调整参数以提升胜率和盈亏比",
    "rationale": "当前策略在牛市和熊市窗口亏损严重（总利润 -42.18% 和 -28.73%），胜率低（0.39 和 0.30），最大回撤高（51.35% 和 32.13%）。横盘和近期窗口表现较好但仍有改进空间。目标缺口显示需要提高每周目标命中率（当前 0）和降低最大回撤（当前 41.80%）。旧组合 DEMA_CROSS+OBV_TREND+ADX 在趋势确认上可能过于滞后，导致入场时机不佳。新组合 RSI 提供超买超卖信号，BBANDS_BREAKOUT 捕捉波动率突破，ADX 确认趋势强度，逻辑一致：在强趋势（ADX>25）下，价格突破布林带上轨（做多）或下轨（做短）且 RSI 未极端超买超卖时入场。这预期能提高胜率至 40%+ 和盈亏比 2:1，通过更精准的突破信号减少亏损交易，适应多种市况。",
    "backtest_metrics": {},
    "eval_result": {},
    "score": 0.0,
    "strategy_version_path": "results/strategy_versions/round_015_20260228_234710__入场重构__换用_RSI_BBANDS_BREAKOUT_ADX_组合替代旧的_DEMA_CROS.py",
    "next_action": "Backtest failed: gnals\n    dataframe = self.advise_entry(dataframe, metadata)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/strategy/interface.py\", line 1832, in advise_entry\n    df = self.populate_entry_trend(dataframe, metadata)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/user_data/strategies/LotteryMindsetStrategy.py\", line 151, in populate_entry_trend\n    & (dataframe[\"close\"] > dataframe[\"bbands_upper\"])\n       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/common.py\", line 76, in new_method\n    return method(self, other)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/arraylike.py\", line 56, in __gt__\n    return self._cmp_method(other, operator.gt)\n           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/series.py\", line 6138, in _cmp_method\n    res_values = ops.comparison_op(lvalues, rvalues, op)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/array_ops.py\", line 347, in comparison_op\n    res_values = _na_arithmetic_op(lvalues, rvalues, op, is_cmp=True)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/ops/array_ops.py\", line 218, in _na_arithmetic_op\n    result = func(left, right)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/computation/expressions.py\", line 242, in evaluate\n    return _evaluate(op, op_str, a, b)  # type: ignore[misc]\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/pandas/core/computation/expressions.py\", line 73, in _evaluate_standard\n    return op(a, b)\nTypeError: '>' not supported between instances of 'float' and 'str'\n",
    "status": "failed",
    "comparison_matrix": {
      "round": 15,
      "candidate_id": "round_15",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {
          "total_profit_pct": -42.17670712000002,
          "total_profit_abs": -42.17670712000002,
          "max_drawdown_pct": 51.346239142764816,
          "max_drawdown_abs": 61.023209140000006,
          "sharpe_ratio": -0.8154057010735373,
          "sortino_ratio": -1.17384389653968,
          "profit_factor": 0.5435173109223959,
          "calmar_ratio": -13.299289981692114,
          "sqn": -1.0271,
          "cagr": -0.8162905047053629,
          "expectancy": -1.8337698747826092,
          "expectancy_ratio": -0.27785902813419383,
          "win_rate": 0.391304347826087,
          "total_trades": 23,
          "trade_count_long": 13,
          "trade_count_short": 10,
          "avg_profit_per_trade_pct": -2.14614381859833,
          "avg_trade_duration": "2:44:00",
          "backtest_days": 118,
          "market_change": 6.433824368121245,
          "best_pair": {
            "key": "LINK/USDT:USDT",
            "trades": 3,
            "profit_mean": 0.04266150529988439,
            "profit_mean_pct": 4.27,
            "profit_total_abs": 13.289638629999999,
            "profit_total": 0.1328963863,
            "profit_total_pct": 13.29,
            "duration_avg": "3:50:00",
            "wins": 2,
            "draws": 0,
            "losses": 1,
            "winrate": 0.6666666666666666,
            "cagr": 0.4710322786498815,
            "expectancy": 4.429879543333334,
            "expectancy_ratio": 1.4438589160289812,
            "sortino": -100,
            "sharpe": 0.26477185683830934,
            "calmar": 81.15695528413319,
            "sqn": 0.7709,
            "profit_factor": 5.331576748086944,
            "max_drawdown_account": 0.026512571408292097,
            "max_drawdown_abs": 3.068083380000001
          },
          "worst_pair": {
            "key": "UNI/USDT:USDT",
            "trades": 1,
            "profit_mean": -0.09997980628320571,
            "profit_mean_pct": -10.0,
            "profit_total_abs": -11.6000696,
            "profit_total": -0.116000696,
            "profit_total_pct": -11.6,
            "duration_avg": "0:45:00",
            "wins": 0,
            "draws": 0,
            "losses": 1,
            "winrate": 0.0,
            "cagr": -0.317089171120449,
            "expectancy": -11.6000696,
            "expectancy_ratio": -1.0,
            "sortino": -100,
            "sharpe": -100,
            "calmar": -16.190655232663396,
            "sqn": -100.0,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.11600069599999997,
            "max_drawdown_abs": 11.6000696
          },
          "total_trades_count": 23,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 2.7282608695652173
        },
        "bear_2022": {
          "total_profit_pct": -28.72850552000001,
          "total_profit_abs": -28.728505520000006,
          "max_drawdown_pct": 32.133889411853474,
          "max_drawdown_abs": 33.74630286,
          "sharpe_ratio": -0.7490751683016942,
          "sortino_ratio": -0.9528941636023717,
          "profit_factor": 0.5358787021113643,
          "calmar_ratio": -11.163612181709064,
          "sqn": -1.0768,
          "cagr": -0.5542277673776991,
          "expectancy": -0.9576168506666662,
          "expectancy_ratio": -0.3248849085220449,
          "win_rate": 0.3,
          "total_trades": 30,
          "trade_count_long": 12,
          "trade_count_short": 18,
          "avg_profit_per_trade_pct": -0.9486199142623589,
          "avg_trade_duration": "3:22:00",
          "backtest_days": 153,
          "market_change": -0.3798385322447017,
          "best_pair": {
            "key": "BTC/USDT:USDT",
            "trades": 9,
            "profit_mean": 0.012698080724056858,
            "profit_mean_pct": 1.27,
            "profit_total_abs": 9.5567397,
            "profit_total": 0.095567397,
            "profit_total_pct": 9.56,
            "duration_avg": "4:53:00",
            "wins": 5,
            "draws": 0,
            "losses": 4,
            "winrate": 0.5555555555555556,
            "cagr": 0.24326545047628878,
            "expectancy": 1.0618599666666668,
            "expectancy_ratio": 0.3998633042803308,
            "sortino": 0.9112496473046057,
            "sharpe": 0.2544038856256045,
            "calmar": 18.421373169374156,
            "sqn": 0.6403,
            "profit_factor": 1.8996924346307442,
            "max_drawdown_account": 0.06478027066316748,
            "max_drawdown_abs": 7.475591650000001
          },
          "worst_pair": {
            "key": "UNI/USDT:USDT",
            "trades": 2,
            "profit_mean": -0.1162349795160649,
            "profit_mean_pct": -11.62,
            "profit_total_abs": -21.4887515,
            "profit_total": -0.214887515,
            "profit_total_pct": -21.49,
            "duration_avg": "1:52:00",
            "wins": 0,
            "draws": 0,
            "losses": 2,
            "winrate": 0.0,
            "cagr": -0.43850317597874,
            "expectancy": -10.74437575,
            "expectancy_ratio": -1.0,
            "sortino": -0.3384655077139783,
            "sharpe": -0.3384655077139783,
            "calmar": -12.4869105715966,
            "sqn": -1.3553,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.21488751500000006,
            "max_drawdown_abs": 21.4887515
          },
          "total_trades_count": 30,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 3.375
        },
        "sideways_2023": {
          "total_profit_pct": 12.18378539,
          "total_profit_abs": 12.18378539,
          "max_drawdown_pct": 9.822748236747833,
          "max_drawdown_abs": 10.121286529999999,
          "sharpe_ratio": 0.41267955530611905,
          "sortino_ratio": 1.4328768838731214,
          "profit_factor": 1.4913041710788613,
          "calmar_ratio": 19.42387297006185,
          "sqn": 0.5884,
          "cagr": 0.41052571340570165,
          "expectancy": 0.6412518626315789,
          "expectancy_ratio": 0.31029737120770173,
          "win_rate": 0.3684210526315789,
          "total_trades": 19,
          "trade_count_long": 7,
          "trade_count_short": 12,
          "avg_profit_per_trade_pct": 0.7024353959223741,
          "avg_trade_duration": "3:22:00",
          "backtest_days": 122,
          "market_change": -0.054497021911408074,
          "best_pair": {
            "key": "XRP/USDT:USDT",
            "trades": 3,
            "profit_mean": 0.03031993547925899,
            "profit_mean_pct": 3.03,
            "profit_total_abs": 10.01976952,
            "profit_total": 0.1001976952,
            "profit_total_pct": 10.02,
            "duration_avg": "3:20:00",
            "wins": 1,
            "draws": 0,
            "losses": 2,
            "winrate": 0.3333333333333333,
            "cagr": 0.33067582957070174,
            "expectancy": 3.339923173333333,
            "expectancy_ratio": 2.4092744291138612,
            "sortino": 1.3243597184469076,
            "sharpe": 0.23233544696378242,
            "calmar": 56.59318443237571,
            "sqn": 0.6994,
            "profit_factor": 4.613911643670792,
            "max_drawdown_account": 0.027725551999999994,
            "max_drawdown_abs": 2.7725551999999998
          },
          "worst_pair": {
            "key": "UNI/USDT:USDT",
            "trades": 1,
            "profit_mean": -0.027869518196990586,
            "profit_mean_pct": -2.79,
            "profit_total_abs": -2.7751125,
            "profit_total": -0.027751125,
            "profit_total_pct": -2.78,
            "duration_avg": "1:45:00",
            "wins": 0,
            "draws": 0,
            "losses": 1,
            "winrate": 0.0,
            "cagr": -0.08075234063371883,
            "expectancy": -2.7751125,
            "expectancy_ratio": -1.0,
            "sortino": -100,
            "sharpe": -100,
            "calmar": -15.659814077494067,
            "sqn": -100.0,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.027751125000000057,
            "max_drawdown_abs": 2.7751125
          },
          "total_trades_count": 19,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 3.368421052631579
        },
        "recovery_2024": {
          "total_profit_pct": -12.459529789999998,
          "total_profit_abs": -12.459529789999998,
          "max_drawdown_pct": 22.88300588,
          "max_drawdown_abs": 22.883005880000002,
          "sharpe_ratio": -0.5275459053230102,
          "sortino_ratio": -0.9143407238588425,
          "profit_factor": 0.6666001535630215,
          "calmar_ratio": -6.843707269446428,
          "sqn": -0.7926,
          "cagr": -0.27351732948832086,
          "expectancy": -0.4614640662962962,
          "expectancy_ratio": -0.22226656429131908,
          "win_rate": 0.3333333333333333,
          "total_trades": 27,
          "trade_count_long": 5,
          "trade_count_short": 22,
          "avg_profit_per_trade_pct": -0.4001491359354004,
          "avg_trade_duration": "3:59:00",
          "backtest_days": 152,
          "market_change": 0.26429653100850814,
          "best_pair": {
            "key": "ETH/USDT:USDT",
            "trades": 2,
            "profit_mean": 0.0394812943958797,
            "profit_mean_pct": 3.95,
            "profit_total_abs": 5.92554915,
            "profit_total": 0.0592554915,
            "profit_total_pct": 5.93,
            "duration_avg": "7:00:00",
            "wins": 1,
            "draws": 0,
            "losses": 1,
            "winrate": 0.5,
            "cagr": 0.14824518713873092,
            "expectancy": 2.962774575,
            "expectancy_ratio": 32.51167431292327,
            "sortino": -100,
            "sharpe": 0.24387992289362467,
            "calmar": 866.4557142025501,
            "sqn": 0.9702,
            "profit_factor": 66.02334862584654,
            "max_drawdown_account": 0.0008595775788192378,
            "max_drawdown_abs": 0.09112955999999972
          },
          "worst_pair": {
            "key": "SOL/USDT:USDT",
            "trades": 4,
            "profit_mean": -0.046022274141403585,
            "profit_mean_pct": -4.6,
            "profit_total_abs": -15.23857554,
            "profit_total": -0.1523857554,
            "profit_total_pct": -15.24,
            "duration_avg": "3:56:00",
            "wins": 0,
            "draws": 0,
            "losses": 4,
            "winrate": 0.0,
            "cagr": -0.3276718180192659,
            "expectancy": -3.809643885,
            "expectancy_ratio": -1.0,
            "sortino": -0.8808906137331904,
            "sharpe": -0.8808906137331904,
            "calmar": -12.569061299041316,
            "sqn": -3.0347,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.1523857554,
            "max_drawdown_abs": 15.23857554
          },
          "total_trades_count": 27,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 3.9814814814814814
        },
        "recent_2025": {
          "total_profit_pct": 37.729517870000016,
          "total_profit_abs": 37.729517870000016,
          "max_drawdown_pct": 14.362015705780202,
          "max_drawdown_abs": 23.031150479999994,
          "sharpe_ratio": 0.3964063569917027,
          "sortino_ratio": 1.3929421552243348,
          "profit_factor": 1.4221403791874454,
          "calmar_ratio": 33.238035181627126,
          "sqn": 0.5814,
          "cagr": 1.1679971560788673,
          "expectancy": 1.3474827810714287,
          "expectancy_ratio": 0.30152884227674703,
          "win_rate": 0.2857142857142857,
          "total_trades": 28,
          "trade_count_long": 7,
          "trade_count_short": 21,
          "avg_profit_per_trade_pct": 1.6959730701900428,
          "avg_trade_duration": "3:12:00",
          "backtest_days": 151,
          "market_change": -0.2185757530104535,
          "best_pair": {
            "key": "LTC/USDT:USDT",
            "trades": 4,
            "profit_mean": 0.12681455715379397,
            "profit_mean_pct": 12.68,
            "profit_total_abs": 52.683197930000006,
            "profit_total": 0.5268319793,
            "profit_total_pct": 52.68,
            "duration_avg": "2:52:00",
            "wins": 2,
            "draws": 0,
            "losses": 2,
            "winrate": 0.5,
            "cagr": 1.7814010340970183,
            "expectancy": 13.170799482500001,
            "expectancy_ratio": 1.6333579864061463,
            "sortino": 1.760611166200157,
            "sharpe": 0.3111477400914322,
            "calmar": 76.3457403453995,
            "sqn": 1.0649,
            "profit_factor": 4.2667159728122925,
            "max_drawdown_account": 0.08730855555841399,
            "max_drawdown_abs": 11.84961174
          },
          "worst_pair": {
            "key": "SOL/USDT:USDT",
            "trades": 2,
            "profit_mean": -0.08589786819255904,
            "profit_mean_pct": -8.59,
            "profit_total_abs": -21.000964699999997,
            "profit_total": -0.21000964699999997,
            "profit_total_pct": -21.0,
            "duration_avg": "3:08:00",
            "wins": 0,
            "draws": 0,
            "losses": 2,
            "winrate": 0.0,
            "cagr": -0.4343738398191992,
            "expectancy": -10.500482349999999,
            "expectancy_ratio": -1.0,
            "sortino": -0.5781009133064003,
            "sharpe": -0.5781009133064003,
            "calmar": -12.652300115591258,
            "sqn": -2.2846,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.21000964699999997,
            "max_drawdown_abs": 21.000964699999997
          },
          "total_trades_count": 28,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 3.2053571428571432
        }
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 15,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": 41.804657
      },
      "weighted_norm": 2.049159,
      "mode": "explore"
    }
  }
]