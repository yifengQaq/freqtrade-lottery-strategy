[
  {
    "round": 1,
    "timestamp": "2026-02-28T16:00:13.961758+00:00",
    "changes_made": "[入场优化] 调整 RSI 和 ADX 参数以增强信号过滤，引入 MACD_CROSS 作为新因子（trend 家族）以提升趋势确认",
    "rationale": "当前策略使用 RSI、BBANDS、ADX 组合，但可能存在信号冲突（如 ADX 确认趋势但 RSI 未超买/超卖）。为满足因子家族硬约束，引入 MACD_CROSS（trend 家族）以增强趋势跟随能力，预期在牛市和恢复窗口提高胜率，同时调整参数减少横盘市假信号。",
    "backtest_metrics": {
      "total_profit_pct": 996.5568857100001,
      "total_profit_abs": 996.5568857100001,
      "max_drawdown_pct": 31.67956990604249,
      "max_drawdown_abs": 134.94669085000004,
      "sharpe_ratio": 0.1019062610986237,
      "sortino_ratio": 0.38052387165776236,
      "profit_factor": 3.887413794849251,
      "calmar_ratio": 32.96723933616832,
      "sqn": 1.6669,
      "cagr": 0.6152302348254015,
      "expectancy": 30.19869350636364,
      "expectancy_ratio": 1.3124608158405686,
      "win_rate": 0.5454545454545454,
      "total_trades": 33,
      "trade_count_long": 20,
      "trade_count_short": 13,
      "avg_profit_per_trade_pct": 9.807770617051178,
      "avg_trade_duration": "10:18:00",
      "backtest_days": 1823,
      "market_change": 7.828158636707855,
      "best_pair": {
        "key": "BTC/USDT:USDT",
        "trades": 3,
        "profit_mean": 0.42480567459342405,
        "profit_mean_pct": 42.48,
        "profit_total_abs": 607.4291059100001,
        "profit_total": 6.074291059100001,
        "profit_total_pct": 607.43,
        "duration_avg": "6:45:00",
        "wins": 2,
        "draws": 0,
        "losses": 1,
        "winrate": 0.6666666666666666,
        "cagr": 0.47952742914469737,
        "expectancy": 202.47636863666665,
        "expectancy_ratio": 24.809539519981673,
        "sortino": -100,
        "sharpe": 0.026238542601956582,
        "calmar": 135.12884194183218,
        "sqn": 1.1802,
        "profit_factor": 75.42861855994502,
        "max_drawdown_account": 0.047109371115848696,
        "max_drawdown_abs": 8.161230419999995
      },
      "worst_pair": {
        "key": "BNB/USDT:USDT",
        "trades": 1,
        "profit_mean": -0.28575452887648767,
        "profit_mean_pct": -28.58,
        "profit_total_abs": -114.56798205,
        "profit_total": -1.1456798205,
        "profit_total_pct": -114.57,
        "duration_avg": "3:30:00",
        "wins": 0,
        "draws": 0,
        "losses": 1,
        "winrate": 0.0,
        "cagr": 0,
        "expectancy": -114.56798205,
        "expectancy_ratio": -1.0,
        "sortino": -100,
        "sharpe": -100,
        "calmar": -1.0479963343139223,
        "sqn": -100.0,
        "profit_factor": 0.0,
        "max_drawdown_account": 1.1456798205,
        "max_drawdown_abs": 114.56798205
      },
      "total_trades_count": 33,
      "stake_limit_hit_count": 0,
      "weekly_target_hit_rate": 0,
      "total_weeks": 0,
      "target_hit_weeks": 0,
      "monthly_net_profit_avg": 0,
      "max_monthly_loss": 0,
      "avg_trade_duration_hours": 10.303030303030303
    },
    "eval_result": {
      "passed": false,
      "score": 0.97,
      "gate_failures": [
        "weekly_target_hit_rate=0.00% < 25.00%",
        "total_trades=33 < 50",
        "monthly_net_profit_avg=0.00 <= 0.0"
      ],
      "score_breakdown": {
        "monthly_profit_component": 0.0,
        "weekly_hit_rate_component": 0.0,
        "max_loss_penalty": 0.0,
        "trade_efficiency_component": 0.9706
      },
      "is_overfitting": false,
      "recommendation": "交易次数不足(33), 建议放宽入场条件或增加交易对 | 周达标率过低, 考虑: 1) 降低目标倍数 2) 增加杠杆(风险更高) 3) 优化入场时机"
    },
    "score": 0.97,
    "strategy_version_path": "results/strategy_versions/round_001_20260301_000259__入场优化__调整_RSI_和_ADX_参数以增强信号过滤_引入_MACD_CROSS_作为新因子_.py",
    "next_action": "continue",
    "status": "success",
    "comparison_matrix": {
      "round": 1,
      "candidate_id": "round_1",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {},
        "bear_2022": {},
        "sideways_2023": {},
        "recovery_2024": {},
        "recent_2025": {}
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 1,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": -50.0
      },
      "weighted_norm": 1.870829,
      "mode": "explore"
    }
  },
  {
    "round": 2,
    "timestamp": "2026-02-28T16:06:14.838883+00:00",
    "changes_made": "[参数优化] 调整 RSI 超买超卖阈值、ADX 阈值、MACD 信号，收紧止损至 -0.25，优化 ROI 表，增加止盈目标",
    "rationale": "当前策略在牛市表现良好（总利润 277.57%），但在熊市、横盘和恢复期亏损或微利，胜率偏低（横盘 40%，恢复 26.7%）。主要问题：入场条件过于严格（ADX>25 + 突破布林上轨 + RSI>50 + MACD 金叉），在震荡市信号稀少且易假突破。调整方向：1) 放宽 RSI 阈值（超买 80→75，超卖 30→35）以捕捉更多反转机会；2) 降低 ADX 阈值（25→20）允许弱趋势入场；3) 优化 MACD 信号（使用 MACD_HIST 正负）；4) 收紧止损（-0.30→-0.25）控制单笔亏损；5) 设置阶梯 ROI（0.5→1.5）锁定利润；6) 引入 trailing stop（0.1）保护盈利。预期提升横盘和恢复期胜率至 35%+，保持牛市动量。",
    "backtest_metrics": {
      "total_profit_pct": 26.25359792,
      "total_profit_abs": 26.253597919999997,
      "max_drawdown_pct": 91.39104979058828,
      "max_drawdown_abs": 500.37361863000007,
      "sharpe_ratio": 0.013355343162814006,
      "sortino_ratio": 0.015627472340370735,
      "profit_factor": 1.0163475940124052,
      "calmar_ratio": 0.30105436413911346,
      "sqn": 0.0724,
      "cagr": 0.04778208215292645,
      "expectancy": 0.08496310006472463,
      "expectancy_ratio": 0.009417060628505336,
      "win_rate": 0.42394822006472493,
      "total_trades": 309,
      "trade_count_long": 192,
      "trade_count_short": 117,
      "avg_profit_per_trade_pct": 0.614662941435098,
      "avg_trade_duration": "11:07:00",
      "backtest_days": 1823,
      "market_change": 7.828158636707855,
      "best_pair": {
        "key": "XRP/USDT:USDT",
        "trades": 33,
        "profit_mean": 0.04275371816913069,
        "profit_mean_pct": 4.28,
        "profit_total_abs": 256.14686333000003,
        "profit_total": 2.5614686333000005,
        "profit_total_pct": 256.15,
        "duration_avg": "12:28:00",
        "wins": 20,
        "draws": 0,
        "losses": 13,
        "winrate": 0.6060606060606061,
        "cagr": 0.2895757637213334,
        "expectancy": 7.762026161515156,
        "expectancy_ratio": 1.095388572183623,
        "sortino": 0.4216409163525478,
        "sharpe": 0.14066086821854873,
        "calmar": 25.020379568318702,
        "sqn": 2.3008,
        "profit_factor": 3.780601760158427,
        "max_drawdown_account": 0.10728892944364221,
        "max_drawdown_abs": 39.03852587
      },
      "worst_pair": {
        "key": "ATOM/USDT:USDT",
        "trades": 13,
        "profit_mean": -0.023031881124650856,
        "profit_mean_pct": -2.3,
        "profit_total_abs": -249.54782648999998,
        "profit_total": -2.4954782648999996,
        "profit_total_pct": -249.55,
        "duration_avg": "10:45:00",
        "wins": 6,
        "draws": 0,
        "losses": 7,
        "winrate": 0.46153846153846156,
        "cagr": 0,
        "expectancy": -19.195986653076922,
        "expectancy_ratio": -0.3533901251271748,
        "sortino": -0.04112228940793066,
        "sharpe": -0.039461012793130995,
        "calmar": -1.4959949741406493,
        "sqn": -1.0034,
        "profit_factor": 0.3437040533352466,
        "max_drawdown_account": 1.7481690240821541,
        "max_drawdown_abs": 372.81705217999996
      },
      "total_trades_count": 309,
      "stake_limit_hit_count": 0,
      "weekly_target_hit_rate": 0,
      "total_weeks": 0,
      "target_hit_weeks": 0,
      "monthly_net_profit_avg": 0,
      "max_monthly_loss": 0,
      "avg_trade_duration_hours": 11.114886731391586
    },
    "eval_result": {
      "passed": false,
      "score": 0.9,
      "gate_failures": [
        "weekly_target_hit_rate=0.00% < 25.00%",
        "monthly_net_profit_avg=0.00 <= 0.0"
      ],
      "score_breakdown": {
        "monthly_profit_component": 0.0,
        "weekly_hit_rate_component": 0.0,
        "max_loss_penalty": 0.0,
        "trade_efficiency_component": 0.8997
      },
      "is_overfitting": false,
      "recommendation": "周达标率过低, 考虑: 1) 降低目标倍数 2) 增加杠杆(风险更高) 3) 优化入场时机"
    },
    "score": 0.9,
    "strategy_version_path": "results/strategy_versions/round_002_20260301_000919__参数优化__调整_RSI_超买超卖阈值_ADX_阈值_MACD_信号_收紧止损至__0_25_优化.py",
    "next_action": "continue",
    "status": "success",
    "comparison_matrix": {
      "round": 2,
      "candidate_id": "round_2",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {
          "total_profit_pct": 277.57123729,
          "total_profit_abs": 277.57123729,
          "max_drawdown_pct": 21.99345729252249,
          "max_drawdown_abs": 71.92751388000002,
          "sharpe_ratio": 1.3862289184041565,
          "sortino_ratio": 2.9043367734017442,
          "profit_factor": 3.1911742525478326,
          "calmar_ratio": 204.33623262105846,
          "sqn": 1.866,
          "cagr": 59.9234856116355,
          "expectancy": 13.8785618645,
          "expectancy_ratio": 0.8764697010191329,
          "win_rate": 0.6,
          "total_trades": 20,
          "trade_count_long": 12,
          "trade_count_short": 8,
          "avg_profit_per_trade_pct": 8.242277111115952,
          "avg_trade_duration": "10:49:00",
          "backtest_days": 118,
          "market_change": 6.433824368121245,
          "best_pair": {
            "key": "UNI/USDT:USDT",
            "trades": 2,
            "profit_mean": 0.23854036751291585,
            "profit_mean_pct": 23.85,
            "profit_total_abs": 89.0595055,
            "profit_total": 0.890595055,
            "profit_total_pct": 89.06,
            "duration_avg": "18:22:00",
            "wins": 2,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 6.17100723147949,
            "expectancy": 44.52975275,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": 0.46360733568971535,
            "calmar": -100,
            "sqn": 1.4317,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "ATOM/USDT:USDT",
            "trades": 2,
            "profit_mean": -0.06877626220660452,
            "profit_mean_pct": -6.88,
            "profit_total_abs": -38.93863615,
            "profit_total": -0.3893863615,
            "profit_total_pct": -38.94,
            "duration_avg": "6:38:00",
            "wins": 0,
            "draws": 0,
            "losses": 2,
            "winrate": 0.0,
            "cagr": -0.7825654361433231,
            "expectancy": -19.469318075,
            "expectancy_ratio": -1.0,
            "sortino": -0.40041705008191397,
            "sharpe": -0.40041705008191397,
            "calmar": -16.190655232663392,
            "sqn": -1.2366,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.3893863615,
            "max_drawdown_abs": 38.93863615
          },
          "total_trades_count": 20,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 10.8125
        },
        "bear_2022": {
          "total_profit_pct": 29.423550969999994,
          "total_profit_abs": 29.423550969999997,
          "max_drawdown_pct": 45.48427813619018,
          "max_drawdown_abs": 107.98236891,
          "sharpe_ratio": 0.1779481521197236,
          "sortino_ratio": 0.4494910215008898,
          "profit_factor": 1.183624082005605,
          "calmar_ratio": 8.077719702643149,
          "sqn": 0.2906,
          "cagr": 0.8502111686685199,
          "expectancy": 1.2792848247826107,
          "expectancy_ratio": 0.10378752461186358,
          "win_rate": 0.43478260869565216,
          "total_trades": 23,
          "trade_count_long": 11,
          "trade_count_short": 12,
          "avg_profit_per_trade_pct": 2.021781834380014,
          "avg_trade_duration": "10:54:00",
          "backtest_days": 153,
          "market_change": -0.3798385322447017,
          "best_pair": {
            "key": "BTC/USDT:USDT",
            "trades": 3,
            "profit_mean": 0.09099350997449786,
            "profit_mean_pct": 9.1,
            "profit_total_abs": 32.95108875,
            "profit_total": 0.32951088749999996,
            "profit_total_pct": 32.95,
            "duration_avg": "7:40:00",
            "wins": 2,
            "draws": 0,
            "losses": 1,
            "winrate": 0.6666666666666666,
            "cagr": 0.9727950941909855,
            "expectancy": 10.983696250000001,
            "expectancy_ratio": 0.9748641925546355,
            "sortino": -100,
            "sharpe": 0.18045715521818728,
            "calmar": 51.97415822213101,
            "sqn": 0.6813,
            "profit_factor": 3.924592577663906,
            "max_drawdown_account": 0.07916574554213579,
            "max_drawdown_abs": 11.26689885
          },
          "worst_pair": {
            "key": "ETC/USDT:USDT",
            "trades": 3,
            "profit_mean": -0.08172628483727407,
            "profit_mean_pct": -8.17,
            "profit_total_abs": -41.42641989,
            "profit_total": -0.4142641989,
            "profit_total_pct": -41.43,
            "duration_avg": "7:00:00",
            "wins": 1,
            "draws": 0,
            "losses": 2,
            "winrate": 0.3333333333333333,
            "cagr": -0.7208584517002417,
            "expectancy": -13.808806629999998,
            "expectancy_ratio": -0.6523642370649181,
            "sortino": -4.255250806338272,
            "sharpe": -0.49483502721622324,
            "calmar": -12.4869105715966,
            "sqn": -1.8681,
            "profit_factor": 0.021453644402622873,
            "max_drawdown_account": 0.4142641989,
            "max_drawdown_abs": 41.42641989
          },
          "total_trades_count": 23,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 10.902173913043478
        },
        "sideways_2023": {
          "total_profit_pct": -10.083934200000005,
          "total_profit_abs": -10.083934200000005,
          "max_drawdown_pct": 20.6819208734754,
          "max_drawdown_abs": 22.61022718,
          "sharpe_ratio": -0.2831852618379555,
          "sortino_ratio": -0.5478997830921754,
          "profit_factor": 0.7949655290337497,
          "calmar_ratio": -7.635293438541649,
          "sqn": -0.3941,
          "cagr": -0.2724040513402336,
          "expectancy": -0.5041967100000007,
          "expectancy_ratio": -0.12302068257975018,
          "win_rate": 0.4,
          "total_trades": 20,
          "trade_count_long": 6,
          "trade_count_short": 14,
          "avg_profit_per_trade_pct": -0.3972255164866186,
          "avg_trade_duration": "9:10:00",
          "backtest_days": 122,
          "market_change": -0.054497021911408074,
          "best_pair": {
            "key": "LINK/USDT:USDT",
            "trades": 1,
            "profit_mean": 0.08169854157848155,
            "profit_mean_pct": 8.17,
            "profit_total_abs": 8.1420885,
            "profit_total": 0.081420885,
            "profit_total_pct": 8.14,
            "duration_avg": "20:15:00",
            "wins": 1,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 0.26387933343752246,
            "expectancy": 8.1420885,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": -100,
            "calmar": -100,
            "sqn": -100.0,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "DOT/USDT:USDT",
            "trades": 1,
            "profit_mean": -0.08787973309390903,
            "profit_mean_pct": -8.79,
            "profit_total_abs": -9.4771872,
            "profit_total": -0.094771872,
            "profit_total_pct": -9.48,
            "duration_avg": "7:45:00",
            "wins": 0,
            "draws": 0,
            "losses": 1,
            "winrate": 0.0,
            "cagr": -0.257616068835547,
            "expectancy": -9.4771872,
            "expectancy_ratio": -1.0,
            "sortino": -100,
            "sharpe": -100,
            "calmar": -15.659814077494092,
            "sqn": -100.0,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.09477187200000003,
            "max_drawdown_abs": 9.4771872
          },
          "total_trades_count": 20,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 9.175
        },
        "recovery_2024": {
          "total_profit_pct": -10.08191305999999,
          "total_profit_abs": -10.08191305999999,
          "max_drawdown_pct": 30.6546211864023,
          "max_drawdown_abs": 31.339358150000002,
          "sharpe_ratio": -0.15168877418613871,
          "sortino_ratio": -0.52213933899706,
          "profit_factor": 0.8988511139672192,
          "calmar_ratio": -4.133803594968426,
          "sqn": -0.2166,
          "cagr": -0.22523104049956677,
          "expectancy": -0.33606376866666565,
          "expectancy_ratio": -0.07417584975737257,
          "win_rate": 0.26666666666666666,
          "total_trades": 30,
          "trade_count_long": 19,
          "trade_count_short": 11,
          "avg_profit_per_trade_pct": 0.10178302859443693,
          "avg_trade_duration": "9:29:00",
          "backtest_days": 152,
          "market_change": 0.26429653100850814,
          "best_pair": {
            "key": "ETH/USDT:USDT",
            "trades": 3,
            "profit_mean": 0.11754507669937471,
            "profit_mean_pct": 11.75,
            "profit_total_abs": 28.58679187,
            "profit_total": 0.2858679187,
            "profit_total_pct": 28.59,
            "duration_avg": "13:15:00",
            "wins": 2,
            "draws": 0,
            "losses": 1,
            "winrate": 0.6666666666666666,
            "cagr": 0.8290052254654212,
            "expectancy": 9.528930623333332,
            "expectancy_ratio": 2.3952742655086046,
            "sortino": -100,
            "sharpe": 0.37550453761135405,
            "calmar": 90.31904721358146,
            "sqn": 1.4083,
            "profit_factor": 8.185822796525814,
            "max_drawdown_account": 0.03978221099999999,
            "max_drawdown_abs": 3.9782211
          },
          "worst_pair": {
            "key": "UNI/USDT:USDT",
            "trades": 3,
            "profit_mean": -0.07171081015774285,
            "profit_mean_pct": -7.17,
            "profit_total_abs": -18.472821,
            "profit_total": -0.18472821,
            "profit_total_pct": -18.47,
            "duration_avg": "13:10:00",
            "wins": 0,
            "draws": 0,
            "losses": 3,
            "winrate": 0.0,
            "cagr": -0.38763679275381313,
            "expectancy": -6.157607,
            "expectancy_ratio": -1.0,
            "sortino": -0.5458738873666724,
            "sharpe": -0.5458738873666724,
            "calmar": -12.569061299041318,
            "sqn": -2.0473,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.18472820999999995,
            "max_drawdown_abs": 18.472821
          },
          "total_trades_count": 30,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 9.483333333333333
        },
        "recent_2025": {
          "total_profit_pct": 5.34553832999999,
          "total_profit_abs": 5.34553832999999,
          "max_drawdown_pct": 38.41001783977879,
          "max_drawdown_abs": 64.50007733000001,
          "sharpe_ratio": 0.05362878963167538,
          "sortino_ratio": 0.08888641017192449,
          "profit_factor": 1.0321393844007039,
          "calmar_ratio": 1.7608259260039407,
          "sqn": 0.0678,
          "cagr": 0.13414392116229457,
          "expectancy": 0.14067206131578924,
          "expectancy_ratio": 0.01776123874775748,
          "win_rate": 0.4473684210526316,
          "total_trades": 38,
          "trade_count_long": 20,
          "trade_count_short": 18,
          "avg_profit_per_trade_pct": 0.7494026335805598,
          "avg_trade_duration": "12:49:00",
          "backtest_days": 151,
          "market_change": -0.2185757530104535,
          "best_pair": {
            "key": "LTC/USDT:USDT",
            "trades": 1,
            "profit_mean": 0.29985007496251875,
            "profit_mean_pct": 29.99,
            "profit_total_abs": 37.193792,
            "profit_total": 0.37193792000000003,
            "profit_total_pct": 37.19,
            "duration_avg": "16:45:00",
            "wins": 1,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 1.1476692718241814,
            "expectancy": 37.193792,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": -100,
            "calmar": -100,
            "sqn": -100.0,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "SOL/USDT:USDT",
            "trades": 3,
            "profit_mean": -0.10930449661530323,
            "profit_mean_pct": -10.93,
            "profit_total_abs": -36.637154699999996,
            "profit_total": -0.36637154699999996,
            "profit_total_pct": -36.64,
            "duration_avg": "10:05:00",
            "wins": 1,
            "draws": 0,
            "losses": 2,
            "winrate": 0.3333333333333333,
            "cagr": -0.6681123499748651,
            "expectancy": -12.212384899999998,
            "expectancy_ratio": -0.6334614286109798,
            "sortino": -0.4683818106366349,
            "sharpe": -0.3606878628426915,
            "calmar": -12.022116159655955,
            "sqn": -1.3439,
            "profit_factor": 0.04980785708353037,
            "max_drawdown_account": 0.38557627499999997,
            "max_drawdown_abs": 38.557627499999995
          },
          "total_trades_count": 38,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 12.81578947368421
        }
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 2,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": -18.32043
      },
      "weighted_norm": 1.870829,
      "mode": "explore"
    }
  },
  {
    "round": 3,
    "timestamp": "2026-02-28T16:12:09.306548+00:00",
    "changes_made": "[入场优化] 引入 ATR_EXPANSION（volatility 家族新因子）过滤高波动突破，调整 RSI 阈值和出场逻辑，降低杠杆至 3x，收紧止损至 -0.30",
    "rationale": "当前策略在熊市、横盘和恢复窗口亏损（profit_factor < 1），入场信号过于宽松导致胜率低（平均 43.5%）。ATR_EXPANSION 可确保突破发生在高波动期，提高信号质量。RSI 阈值调整避免超买超卖区入场，收紧止损减少单笔亏损。新家族因子引入满足硬约束，预期提升跨市况适应力。",
    "backtest_metrics": {
      "total_profit_pct": -92.63605800999997,
      "total_profit_abs": -92.63605800999997,
      "max_drawdown_pct": 96.9028401760332,
      "max_drawdown_abs": 174.62109334000007,
      "sharpe_ratio": -0.1888920748126648,
      "sortino_ratio": -0.19872742447369898,
      "profit_factor": 0.7916656476331664,
      "calmar_ratio": -1.0018514322533032,
      "sqn": -1.022,
      "cagr": -0.4068377624973374,
      "expectancy": -0.298825993580645,
      "expectancy_ratio": -0.0900542039263088,
      "win_rate": 0.567741935483871,
      "total_trades": 310,
      "trade_count_long": 137,
      "trade_count_short": 173,
      "avg_profit_per_trade_pct": -0.6166499818591469,
      "avg_trade_duration": "4:42:00",
      "backtest_days": 1823,
      "market_change": 7.828158636707855,
      "best_pair": {
        "key": "XRP/USDT:USDT",
        "trades": 26,
        "profit_mean": 0.008545149167303258,
        "profit_mean_pct": 0.85,
        "profit_total_abs": 32.6179461,
        "profit_total": 0.32617946099999995,
        "profit_total_pct": 32.62,
        "duration_avg": "5:14:00",
        "wins": 13,
        "draws": 0,
        "losses": 13,
        "winrate": 0.5,
        "cagr": 0.058150303226476296,
        "expectancy": 1.2545363884615388,
        "expectancy_ratio": 1.2156726287443647,
        "sortino": 0.31775351783141625,
        "sharpe": 0.060450982015046416,
        "calmar": 4.746181197849669,
        "sqn": 1.1093,
        "profit_factor": 3.431345257488729,
        "max_drawdown_account": 0.0720231413860399,
        "max_drawdown_abs": 10.01452037
      },
      "worst_pair": {
        "key": "ATOM/USDT:USDT",
        "trades": 20,
        "profit_mean": -0.008927271062161374,
        "profit_mean_pct": -0.89,
        "profit_total_abs": -61.34893179,
        "profit_total": -0.6134893179,
        "profit_total_pct": -61.35,
        "duration_avg": "4:13:00",
        "wins": 13,
        "draws": 0,
        "losses": 7,
        "winrate": 0.65,
        "cagr": -0.17331184344638761,
        "expectancy": -3.0674465894999985,
        "expectancy_ratio": -0.20595374647316655,
        "sortino": -0.11129259502457907,
        "sharpe": -0.06553061715569923,
        "calmar": -0.6941301083504983,
        "sqn": -1.3628,
        "profit_factor": 0.4115607243623811,
        "max_drawdown_account": 0.9262450203,
        "max_drawdown_abs": 92.62450203
      },
      "total_trades_count": 310,
      "stake_limit_hit_count": 0,
      "weekly_target_hit_rate": 0,
      "total_weeks": 0,
      "target_hit_weeks": 0,
      "monthly_net_profit_avg": 0,
      "max_monthly_loss": 0,
      "avg_trade_duration_hours": 4.70483870967742
    },
    "eval_result": {
      "passed": false,
      "score": 2.13,
      "gate_failures": [
        "weekly_target_hit_rate=0.00% < 25.00%",
        "max_drawdown_pct=96.9% > 95.0%",
        "monthly_net_profit_avg=0.00 <= 0.0"
      ],
      "score_breakdown": {
        "monthly_profit_component": 0.0,
        "weekly_hit_rate_component": 0.0,
        "max_loss_penalty": 0.0,
        "trade_efficiency_component": 2.1255
      },
      "is_overfitting": false,
      "recommendation": "周达标率过低, 考虑: 1) 降低目标倍数 2) 增加杠杆(风险更高) 3) 优化入场时机 | 平均每笔亏损, 信号质量需要根本性改善"
    },
    "score": 2.13,
    "strategy_version_path": "results/strategy_versions/round_003_20260301_001508__入场优化__引入_ATR_EXPANSION_volatility_家族新因子_过滤高波动突破_调.py",
    "next_action": "continue",
    "status": "success",
    "comparison_matrix": {
      "round": 3,
      "candidate_id": "round_3",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {
          "total_profit_pct": 132.25604716000004,
          "total_profit_abs": 132.25604716000004,
          "max_drawdown_pct": 27.28493294304763,
          "max_drawdown_abs": 83.78768641999999,
          "sharpe_ratio": 0.8502769242944911,
          "sortino_ratio": 1.398404700891646,
          "profit_factor": 1.9658724199695297,
          "calmar_ratio": 78.4796527252617,
          "sqn": 1.1727,
          "cagr": 12.552414052711136,
          "expectancy": 6.960844587368421,
          "expectancy_ratio": 0.3558477336729846,
          "win_rate": 0.631578947368421,
          "total_trades": 19,
          "trade_count_long": 11,
          "trade_count_short": 8,
          "avg_profit_per_trade_pct": 5.62948823721619,
          "avg_trade_duration": "9:56:00",
          "backtest_days": 118,
          "market_change": 6.433824368121245,
          "best_pair": {
            "key": "XRP/USDT:USDT",
            "trades": 1,
            "profit_mean": 0.2036261894237833,
            "profit_mean_pct": 20.36,
            "profit_total_abs": 51.53838888,
            "profit_total": 0.5153838888,
            "profit_total_pct": 51.54,
            "duration_avg": "6:00:00",
            "wins": 1,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 2.6173987231271814,
            "expectancy": 51.53838888,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": -100,
            "calmar": -100,
            "sqn": -100.0,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "DOT/USDT:USDT",
            "trades": 1,
            "profit_mean": -0.17117617664642448,
            "profit_mean_pct": -17.12,
            "profit_total_abs": -45.51839445,
            "profit_total": -0.45518394450000005,
            "profit_total_pct": -45.52,
            "duration_avg": "1:00:00",
            "wins": 0,
            "draws": 0,
            "losses": 1,
            "winrate": 0.0,
            "cagr": -0.8471861143724525,
            "expectancy": -45.51839445,
            "expectancy_ratio": -1.0,
            "sortino": -100,
            "sharpe": -100,
            "calmar": -16.19065523266339,
            "sqn": -100.0,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.45518394450000005,
            "max_drawdown_abs": 45.51839445
          },
          "total_trades_count": 19,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 9.93421052631579
        },
        "bear_2022": {
          "total_profit_pct": -9.858329989999994,
          "total_profit_abs": -9.858329989999994,
          "max_drawdown_pct": 30.45648928006761,
          "max_drawdown_abs": 38.793526119999996,
          "sharpe_ratio": -0.10848707170537908,
          "sortino_ratio": -0.2443731846990197,
          "profit_factor": 0.8988658665575086,
          "calmar_ratio": -4.04183436371907,
          "sqn": -0.1772,
          "cagr": -0.21932626522653964,
          "expectancy": -0.42862304304347765,
          "expectancy_ratio": -0.061559907312820905,
          "win_rate": 0.391304347826087,
          "total_trades": 23,
          "trade_count_long": 13,
          "trade_count_short": 10,
          "avg_profit_per_trade_pct": 0.16321175321133666,
          "avg_trade_duration": "9:40:00",
          "backtest_days": 153,
          "market_change": -0.3798385322447017,
          "best_pair": {
            "key": "XRP/USDT:USDT",
            "trades": 2,
            "profit_mean": 0.1586082056440621,
            "profit_mean_pct": 15.86,
            "profit_total_abs": 30.79876907,
            "profit_total": 0.3079876907,
            "profit_total_pct": 30.8,
            "duration_avg": "13:15:00",
            "wins": 2,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 0.8974577863402466,
            "expectancy": 15.399384535,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": 0.27934818092977964,
            "calmar": -100,
            "sqn": 1.1186,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "SOL/USDT:USDT",
            "trades": 4,
            "profit_mean": -0.07494036749174598,
            "profit_mean_pct": -7.49,
            "profit_total_abs": -30.17576315,
            "profit_total": -0.3017576315,
            "profit_total_pct": -30.18,
            "duration_avg": "3:00:00",
            "wins": 0,
            "draws": 0,
            "losses": 4,
            "winrate": 0.0,
            "cagr": -0.5755193255191874,
            "expectancy": -7.5439407875,
            "expectancy_ratio": -1.0,
            "sortino": -1.152185395540737,
            "sharpe": -1.152185395540737,
            "calmar": -12.486910571596603,
            "sqn": -3.9955,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.30175763149999996,
            "max_drawdown_abs": 30.17576315
          },
          "total_trades_count": 23,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 9.67391304347826
        },
        "sideways_2023": {
          "total_profit_pct": -4.149947719999997,
          "total_profit_abs": -4.149947719999997,
          "max_drawdown_pct": 24.886950887865076,
          "max_drawdown_abs": 25.239706729999995,
          "sharpe_ratio": -0.13421986393152013,
          "sortino_ratio": -0.30192149124485457,
          "profit_factor": 0.9032361782649677,
          "calmar_ratio": -2.6113046157939928,
          "sqn": -0.1785,
          "cagr": -0.11909729288594506,
          "expectancy": -0.1886339872727274,
          "expectancy_ratio": -0.06597533300115843,
          "win_rate": 0.3181818181818182,
          "total_trades": 22,
          "trade_count_long": 14,
          "trade_count_short": 8,
          "avg_profit_per_trade_pct": -0.0074833397852539585,
          "avg_trade_duration": "10:23:00",
          "backtest_days": 122,
          "market_change": -0.054497021911408074,
          "best_pair": {
            "key": "LINK/USDT:USDT",
            "trades": 1,
            "profit_mean": 0.09964139467228658,
            "profit_mean_pct": 9.96,
            "profit_total_abs": 8.60969258,
            "profit_total": 0.0860969258,
            "profit_total_pct": 8.61,
            "duration_avg": "1 day, 8:00:00",
            "wins": 1,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 0.2803000088323695,
            "expectancy": 8.60969258,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": -100,
            "calmar": -100,
            "sqn": -100.0,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "DOT/USDT:USDT",
            "trades": 2,
            "profit_mean": -0.06457015263322519,
            "profit_mean_pct": -6.46,
            "profit_total_abs": -12.045555199999999,
            "profit_total": -0.120455552,
            "profit_total_pct": -12.05,
            "duration_avg": "8:08:00",
            "wins": 0,
            "draws": 0,
            "losses": 2,
            "winrate": 0.0,
            "cagr": -0.3188695781625499,
            "expectancy": -6.0227775999999995,
            "expectancy_ratio": -1.0,
            "sortino": -0.9175263503495361,
            "sharpe": -0.9175263503495361,
            "calmar": -15.659814077494104,
            "sqn": -2.9296,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.12045555199999995,
            "max_drawdown_abs": 12.045555199999999
          },
          "total_trades_count": 22,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 10.386363636363635
        },
        "recovery_2024": {
          "total_profit_pct": -9.547463549999994,
          "total_profit_abs": -9.547463549999994,
          "max_drawdown_pct": 43.11563067,
          "max_drawdown_abs": 43.11563067,
          "sharpe_ratio": -0.13596339336137456,
          "sortino_ratio": -0.41936004543277006,
          "profit_factor": 0.9064360077549978,
          "calmar_ratio": -2.7832749456639814,
          "sqn": -0.2007,
          "cagr": -0.21412683679705835,
          "expectancy": -0.340980841071429,
          "expectancy_ratio": -0.06348985188053724,
          "win_rate": 0.32142857142857145,
          "total_trades": 28,
          "trade_count_long": 21,
          "trade_count_short": 7,
          "avg_profit_per_trade_pct": 0.4027089242936292,
          "avg_trade_duration": "9:58:00",
          "backtest_days": 152,
          "market_change": 0.26429653100850814,
          "best_pair": {
            "key": "ETH/USDT:USDT",
            "trades": 2,
            "profit_mean": 0.19708995872356566,
            "profit_mean_pct": 19.71,
            "profit_total_abs": 29.44924911,
            "profit_total": 0.2944924911,
            "profit_total_pct": 29.45,
            "duration_avg": "17:08:00",
            "wins": 2,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 0.8586019343058611,
            "expectancy": 14.724624555,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": 4.3788454487623945,
            "calmar": -100,
            "sqn": 17.4191,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "LINK/USDT:USDT",
            "trades": 3,
            "profit_mean": -0.06816618974966558,
            "profit_mean_pct": -6.82,
            "profit_total_abs": -19.01254224,
            "profit_total": -0.1901254224,
            "profit_total_pct": -19.01,
            "duration_avg": "6:25:00",
            "wins": 0,
            "draws": 0,
            "losses": 3,
            "winrate": 0.0,
            "cagr": -0.39732644326540856,
            "expectancy": -6.337514079999999,
            "expectancy_ratio": -1.0,
            "sortino": -0.5738048154346911,
            "sharpe": -0.5738048154346911,
            "calmar": -12.569061299041312,
            "sqn": -2.1521,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.19012542240000002,
            "max_drawdown_abs": 19.01254224
          },
          "total_trades_count": 28,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 9.973214285714285
        },
        "recent_2025": {
          "total_profit_pct": 1.8627921100000027,
          "total_profit_abs": 1.8627921100000029,
          "max_drawdown_pct": 30.48916016431661,
          "max_drawdown_abs": 41.450746339999995,
          "sharpe_ratio": 0.0315450912019748,
          "sortino_ratio": 0.04591869587243824,
          "profit_factor": 1.0198336312276512,
          "calmar_ratio": 0.7730158752047013,
          "sqn": 0.0427,
          "cagr": 0.045623654598276,
          "expectancy": 0.05644824575757568,
          "expectancy_ratio": 0.009616306049770262,
          "win_rate": 0.5151515151515151,
          "total_trades": 33,
          "trade_count_long": 21,
          "trade_count_short": 12,
          "avg_profit_per_trade_pct": 0.5211967154715078,
          "avg_trade_duration": "13:07:00",
          "backtest_days": 151,
          "market_change": -0.2185757530104535,
          "best_pair": {
            "key": "AVAX/USDT:USDT",
            "trades": 2,
            "profit_mean": 0.12777953289625787,
            "profit_mean_pct": 12.78,
            "profit_total_abs": 23.6796705,
            "profit_total": 0.236796705,
            "profit_total_pct": 23.68,
            "duration_avg": "14:30:00",
            "wins": 2,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 0.6714954915179634,
            "expectancy": 11.83983525,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": 1.7312120243443339,
            "calmar": -100,
            "sqn": 6.8415,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "ETH/USDT:USDT",
            "trades": 3,
            "profit_mean": -0.056391837169497076,
            "profit_mean_pct": -5.64,
            "profit_total_abs": -21.738734640000004,
            "profit_total": -0.21738734640000004,
            "profit_total_pct": -21.74,
            "duration_avg": "7:50:00",
            "wins": 1,
            "draws": 0,
            "losses": 2,
            "winrate": 0.3333333333333333,
            "cagr": -0.4470580888568533,
            "expectancy": -7.246244880000001,
            "expectancy_ratio": -0.5542534434609029,
            "sortino": -0.4708873604386977,
            "sharpe": -0.28885362508319457,
            "calmar": -10.51887136015085,
            "sqn": -1.0762,
            "profit_factor": 0.16861983480864573,
            "max_drawdown_account": 0.2614776675,
            "max_drawdown_abs": 26.147766750000002
          },
          "total_trades_count": 33,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 13.113636363636365
        }
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 3,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": 41.39105
      },
      "weighted_norm": 2.045798,
      "mode": "explore"
    }
  },
  {
    "round": 4,
    "timestamp": "2026-02-28T16:16:41.114719+00:00",
    "changes_made": "[入场重构] 换用 STOCH+ADOSC+ATR_EXPANSION 组合替代旧的 ADX+BBANDS+RSI+MACD，引入新家族 volume (ADOSC) 和 momentum (STOCH)，简化入场逻辑为动量+量能+波动率突破",
    "rationale": "上轮策略在牛市和横盘市表现尚可（bull_2021 total_profit_pct 22.46%，sideways_2023 16.63%），但在熊市、恢复期和近期窗口亏损严重（bear_2022 -20.28%，recovery_2024 -41.65%，recent_2025 -35.49%），最大回撤高达47.38%。分析显示入场条件过于复杂（ADX>25 + close>BB_upper + RSI>50 + MACD_hist>0 + ATR_expansion），导致信号稀少且易在趋势反转时失效。目标缺口显示 weekly_target_hit_rate 为0，需要提高胜率和适应性。本轮引入新家族 volume (ADOSC) 和 momentum (STOCH)，结合 volatility (ATR_EXPANSION)，构建动量+量能+波动率突破组合，旨在捕捉日常高波动率突破，提高交易频率和跨市况表现。",
    "backtest_metrics": {},
    "eval_result": {},
    "score": 0.0,
    "strategy_version_path": "results/strategy_versions/round_004_20260301_001919__入场重构__换用_STOCH_ADOSC_ATR_EXPANSION_组合替代旧的_ADX_BBA.py",
    "next_action": "Backtest failed: NameError: name 'current_alance' is not defined. Did you mean: 'current_balance'?\n2026-03-01 00:19:43,171 - LotteryMindsetStrategy - INFO - [滚仓] ALL IN: 87.48 USDT (余额=88.36, 第2笔)\n2026-03-01 00:19:43,172 - LotteryMindsetStrategy - INFO - [BudgetCtrl] 拒绝开仓 ETH/USDT:USDT - 本周已达标或亏完\n2026-03-01 00:19:43,172 - LotteryMindsetStrategy - INFO - [滚仓] ALL IN: 87.48 USDT (余额=88.36, 第2笔)\n2026-03-01 00:19:43,172 - LotteryMindsetStrategy - INFO - [BudgetCtrl] 拒绝开仓 SOL/USDT:USDT - 本周已达标或亏完\n2026-03-01 00:19:43,",
    "status": "failed",
    "comparison_matrix": {
      "round": 4,
      "candidate_id": "round_4",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {
          "total_profit_pct": 22.455125949999996,
          "total_profit_abs": 22.455125949999996,
          "max_drawdown_pct": 36.45387100332187,
          "max_drawdown_abs": 65.69069389,
          "sharpe_ratio": 0.24462721388268557,
          "sortino_ratio": 0.5120270672502847,
          "profit_factor": 1.2266260734167778,
          "calmar_ratio": 9.973239945611072,
          "sqn": 0.3461,
          "cagr": 0.8712514543974967,
          "expectancy": 1.2475069972222217,
          "expectancy_ratio": 0.07554202447225933,
          "win_rate": 0.6666666666666666,
          "total_trades": 18,
          "trade_count_long": 6,
          "trade_count_short": 12,
          "avg_profit_per_trade_pct": 1.8336443127552629,
          "avg_trade_duration": "3:12:00",
          "backtest_days": 118,
          "market_change": 6.433824368121245,
          "best_pair": {
            "key": "XRP/USDT:USDT",
            "trades": 2,
            "profit_mean": 0.1738334947331095,
            "profit_mean_pct": 17.38,
            "profit_total_abs": 37.4221495,
            "profit_total": 0.374221495,
            "profit_total_pct": 37.42,
            "duration_avg": "0:22:00",
            "wins": 2,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 1.6732520453707034,
            "expectancy": 18.71107475,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": 0.7573342503417334,
            "calmar": -100,
            "sqn": 2.3388,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "ATOM/USDT:USDT",
            "trades": 4,
            "profit_mean": -0.08825180807835684,
            "profit_mean_pct": -8.83,
            "profit_total_abs": -46.0106414,
            "profit_total": -0.46010641399999996,
            "profit_total_pct": -46.01,
            "duration_avg": "3:56:00",
            "wins": 1,
            "draws": 0,
            "losses": 3,
            "winrate": 0.25,
            "cagr": -0.8514166380483187,
            "expectancy": -11.50266035,
            "expectancy_ratio": -0.6556915651405397,
            "sortino": -2.0619002806265847,
            "sharpe": -0.6822020406250596,
            "calmar": -16.19065523266339,
            "sqn": -1.8245,
            "profit_factor": 0.12574457981261372,
            "max_drawdown_account": 0.46010641399999996,
            "max_drawdown_abs": 46.0106414
          },
          "total_trades_count": 18,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 3.2083333333333335
        },
        "bear_2022": {
          "total_profit_pct": -20.276050780000002,
          "total_profit_abs": -20.276050780000002,
          "max_drawdown_pct": 31.021713559304242,
          "max_drawdown_abs": 35.85437743,
          "sharpe_ratio": -0.45346294689275984,
          "sortino_ratio": -0.8322847393521909,
          "profit_factor": 0.7106541939355787,
          "calmar_ratio": -8.161548921241796,
          "sqn": -0.6984,
          "cagr": -0.41759084623545184,
          "expectancy": -0.7798481069230767,
          "expectancy_ratio": -0.1558015878808422,
          "win_rate": 0.46153846153846156,
          "total_trades": 26,
          "trade_count_long": 14,
          "trade_count_short": 12,
          "avg_profit_per_trade_pct": -0.6965520597773329,
          "avg_trade_duration": "5:47:00",
          "backtest_days": 153,
          "market_change": -0.3798385322447017,
          "best_pair": {
            "key": "ATOM/USDT:USDT",
            "trades": 1,
            "profit_mean": 0.1176233277929287,
            "profit_mean_pct": 11.76,
            "profit_total_abs": 12.048717,
            "profit_total": 0.12048717,
            "profit_total_pct": 12.05,
            "duration_avg": "9:15:00",
            "wins": 1,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 0.3117954056189973,
            "expectancy": 12.048717,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": -100,
            "calmar": -100,
            "sqn": -100.0,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "SOL/USDT:USDT",
            "trades": 2,
            "profit_mean": -0.08157478472351318,
            "profit_mean_pct": -8.16,
            "profit_total_abs": -17.16518955,
            "profit_total": -0.1716518955,
            "profit_total_pct": -17.17,
            "duration_avg": "9:00:00",
            "wins": 0,
            "draws": 0,
            "losses": 2,
            "winrate": 0.0,
            "cagr": -0.3619026476599788,
            "expectancy": -8.582594775,
            "expectancy_ratio": -1.0,
            "sortino": -2.1261523414535244,
            "sharpe": -2.1261523414535244,
            "calmar": -12.486910571596596,
            "sqn": -8.5135,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.17165189550000007,
            "max_drawdown_abs": 17.16518955
          },
          "total_trades_count": 26,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 5.778846153846154
        },
        "sideways_2023": {
          "total_profit_pct": 16.6348573,
          "total_profit_abs": 16.6348573,
          "max_drawdown_pct": 3.667270480222499,
          "max_drawdown_abs": 4.44009836,
          "sharpe_ratio": 0.8283889565328636,
          "sortino_ratio": 2.8006027705677967,
          "profit_factor": 1.850269925704198,
          "calmar_ratio": 71.03342224919298,
          "sqn": 1.1529,
          "cagr": 0.5846644442249453,
          "expectancy": 0.8317428650000003,
          "expectancy_ratio": 0.34010797028167894,
          "win_rate": 0.6,
          "total_trades": 20,
          "trade_count_long": 5,
          "trade_count_short": 15,
          "avg_profit_per_trade_pct": 0.820374977922871,
          "avg_trade_duration": "5:22:00",
          "backtest_days": 122,
          "market_change": -0.054497021911408074,
          "best_pair": {
            "key": "LTC/USDT:USDT",
            "trades": 2,
            "profit_mean": 0.03307020177281457,
            "profit_mean_pct": 3.31,
            "profit_total_abs": 7.50529314,
            "profit_total": 0.0750529314,
            "profit_total_pct": 7.51,
            "duration_avg": "0:38:00",
            "wins": 2,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 0.24174357487859832,
            "expectancy": 3.75264657,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": 11.550253150014774,
            "calmar": -100,
            "sqn": 36.8786,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "BTC/USDT:USDT",
            "trades": 4,
            "profit_mean": -0.009020076458008085,
            "profit_mean_pct": -0.9,
            "profit_total_abs": -3.9299027,
            "profit_total": -0.039299027,
            "profit_total_pct": -3.93,
            "duration_avg": "5:49:00",
            "wins": 1,
            "draws": 0,
            "losses": 3,
            "winrate": 0.25,
            "cagr": -0.11303310400156663,
            "expectancy": -0.9824756750000001,
            "expectancy_ratio": -0.47538005419128093,
            "sortino": -2.119974731066716,
            "sharpe": -0.3248067674497809,
            "calmar": -10.15115816537169,
            "sqn": -0.8981,
            "profit_factor": 0.36615992774495876,
            "max_drawdown_account": 0.060625147024678125,
            "max_drawdown_abs": 6.2001487
          },
          "total_trades_count": 20,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 5.3625
        },
        "recovery_2024": {
          "total_profit_pct": -41.645260480000005,
          "total_profit_abs": -41.645260480000005,
          "max_drawdown_pct": 47.38214185,
          "max_drawdown_abs": 47.38214185,
          "sharpe_ratio": -1.2271176097296763,
          "sortino_ratio": -1.280106035439432,
          "profit_factor": 0.30873113863752777,
          "calmar_ratio": -11.04723871379113,
          "sqn": -1.8775,
          "cagr": -0.725668973203467,
          "expectancy": -1.601740787692308,
          "expectancy_ratio": -0.3722216945797927,
          "win_rate": 0.46153846153846156,
          "total_trades": 26,
          "trade_count_long": 12,
          "trade_count_short": 14,
          "avg_profit_per_trade_pct": -1.924862745015772,
          "avg_trade_duration": "3:35:00",
          "backtest_days": 152,
          "market_change": 0.26429653100850814,
          "best_pair": {
            "key": "SOL/USDT:USDT",
            "trades": 1,
            "profit_mean": 0.08731062572164364,
            "profit_mean_pct": 8.73,
            "profit_total_abs": 4.79296847,
            "profit_total": 0.0479296847,
            "profit_total_pct": 4.79,
            "duration_avg": "0:45:00",
            "wins": 1,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 0.11898404839256704,
            "expectancy": 4.79296847,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": -100,
            "calmar": -100,
            "sqn": -100.0,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "XRP/USDT:USDT",
            "trades": 4,
            "profit_mean": -0.037765198027175595,
            "profit_mean_pct": -3.78,
            "profit_total_abs": -14.4346938,
            "profit_total": -0.144346938,
            "profit_total_pct": -14.43,
            "duration_avg": "2:41:00",
            "wins": 2,
            "draws": 0,
            "losses": 2,
            "winrate": 0.5,
            "cagr": -0.3122582027303573,
            "expectancy": -3.60867345,
            "expectancy_ratio": -0.46317465655512424,
            "sortino": -0.322208555191333,
            "sharpe": -0.31377505662247185,
            "calmar": -12.434454172259422,
            "sqn": -1.081,
            "profit_factor": 0.07365068688975143,
            "max_drawdown_account": 0.14590954190000005,
            "max_drawdown_abs": 14.59095419
          },
          "total_trades_count": 26,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 3.576923076923077
        },
        "recent_2025": {
          "total_profit_pct": -35.49452781000001,
          "total_profit_abs": -35.49452781000001,
          "max_drawdown_pct": 38.317296848051264,
          "max_drawdown_abs": 40.07080105,
          "sharpe_ratio": -0.5782636270709955,
          "sortino_ratio": -0.6365098061656309,
          "profit_factor": 0.6327635601950965,
          "calmar_ratio": -11.720227032042315,
          "sqn": -0.8204,
          "cagr": -0.6534600798491241,
          "expectancy": -1.1831509269999994,
          "expectancy_ratio": -0.13465336126179794,
          "win_rate": 0.6333333333333333,
          "total_trades": 30,
          "trade_count_long": 17,
          "trade_count_short": 13,
          "avg_profit_per_trade_pct": -0.9573725851427218,
          "avg_trade_duration": "4:22:00",
          "backtest_days": 151,
          "market_change": -0.2185757530104535,
          "best_pair": {
            "key": "ETC/USDT:USDT",
            "trades": 2,
            "profit_mean": 0.08752526960585841,
            "profit_mean_pct": 8.75,
            "profit_total_abs": 13.04717197,
            "profit_total": 0.13047171970000002,
            "profit_total_pct": 13.05,
            "duration_avg": "4:30:00",
            "wins": 2,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 0.34505591945949554,
            "expectancy": 6.523585985,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": 0.8477155806021801,
            "calmar": -100,
            "sqn": 3.35,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "ETH/USDT:USDT",
            "trades": 6,
            "profit_mean": -0.06860477539730393,
            "profit_mean_pct": -6.86,
            "profit_total_abs": -34.95505405,
            "profit_total": -0.3495505405,
            "profit_total_pct": -34.96,
            "duration_avg": "2:52:00",
            "wins": 2,
            "draws": 0,
            "losses": 4,
            "winrate": 0.3333333333333333,
            "cagr": -0.6464129532706611,
            "expectancy": -5.825842341666666,
            "expectancy_ratio": -0.575747800465827,
            "sortino": -1.3237961022824352,
            "sharpe": -0.6644503162450193,
            "calmar": -12.027328066733213,
            "sqn": -1.9572,
            "profit_factor": 0.1363782993012596,
            "max_drawdown_account": 0.36771411899919854,
            "max_drawdown_abs": 37.82773855
          },
          "total_trades_count": 30,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 4.366666666666666
        }
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 4,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": 46.90284
      },
      "weighted_norm": 2.092833,
      "mode": "explore"
    }
  },
  {
    "round": 5,
    "timestamp": "2026-02-28T16:20:56.474291+00:00",
    "changes_made": "[入场优化] 引入 RSI 作为动量确认，调整 STOCH 参数以降低假信号，优化 ROI 和 trailing stop 参数",
    "rationale": "当前策略在熊市和横盘窗口表现不佳，胜率低导致滚仓失败。引入 RSI 提供额外动量过滤，调整 STOCH 参数减少过度交易，优化止盈止损以提升盈亏比。STOCH 和 ADOSC 来自 momentum 和 volume 家族，ATR_EXPANSION 来自 volatility 家族，RSI 来自 momentum 家族（新引入，之前未使用过 momentum 家族）。",
    "backtest_metrics": {
      "total_profit_pct": -95.5505767,
      "total_profit_abs": -95.5505767,
      "max_drawdown_pct": 95.85970671999992,
      "max_drawdown_abs": 95.85970671999992,
      "sharpe_ratio": -0.3470459532894631,
      "sortino_ratio": -0.32261981280666996,
      "profit_factor": 0.534058658792999,
      "calmar_ratio": -1.0446167378299416,
      "sqn": -1.8629,
      "cagr": -0.4637538863637114,
      "expectancy": -0.30333516412698414,
      "expectancy_ratio": -0.27512726814127686,
      "win_rate": 0.4095238095238095,
      "total_trades": 315,
      "trade_count_long": 149,
      "trade_count_short": 166,
      "avg_profit_per_trade_pct": -0.8396337681923858,
      "avg_trade_duration": "0:35:00",
      "backtest_days": 1823,
      "market_change": 7.828158636707855,
      "best_pair": {
        "key": "ADA/USDT:USDT",
        "trades": 16,
        "profit_mean": 0.02903758508623012,
        "profit_mean_pct": 2.9,
        "profit_total_abs": 26.526322639999997,
        "profit_total": 0.26526322639999994,
        "profit_total_pct": 26.53,
        "duration_avg": "0:33:00",
        "wins": 12,
        "draws": 0,
        "losses": 4,
        "winrate": 0.75,
        "cagr": 0.048234857818197696,
        "expectancy": 1.6578951649999998,
        "expectancy_ratio": 1.8377146982840453,
        "sortino": 0.2474414065880114,
        "sharpe": 0.054997730123669056,
        "calmar": 10.629406851580777,
        "sqn": 1.2703,
        "profit_factor": 8.350858793136183,
        "max_drawdown_account": 0.026153377396984413,
        "max_drawdown_abs": 3.2851277000000003
      },
      "worst_pair": {
        "key": "SOL/USDT:USDT",
        "trades": 42,
        "profit_mean": -0.017250637956391496,
        "profit_mean_pct": -1.73,
        "profit_total_abs": -57.7361336,
        "profit_total": -0.5773613360000001,
        "profit_total_pct": -57.74,
        "duration_avg": "0:32:00",
        "wins": 16,
        "draws": 0,
        "losses": 26,
        "winrate": 0.38095238095238093,
        "cagr": -0.15838827808052258,
        "expectancy": -1.3746698476190475,
        "expectancy_ratio": -0.49291748273226854,
        "sortino": -0.0872765610682639,
        "sharpe": -0.10412188882118388,
        "calmar": -0.9281957088609003,
        "sqn": -1.5147,
        "profit_factor": 0.20374868174018163,
        "max_drawdown_account": 0.6518803717,
        "max_drawdown_abs": 65.18803717
      },
      "total_trades_count": 315,
      "stake_limit_hit_count": 0,
      "weekly_target_hit_rate": 0,
      "total_weeks": 0,
      "target_hit_weeks": 0,
      "monthly_net_profit_avg": 0,
      "max_monthly_loss": 0,
      "avg_trade_duration_hours": 0.5865079365079365
    },
    "eval_result": {
      "passed": false,
      "score": 17.05,
      "gate_failures": [
        "weekly_target_hit_rate=0.00% < 25.00%",
        "max_drawdown_pct=95.9% > 95.0%",
        "monthly_net_profit_avg=0.00 <= 0.0"
      ],
      "score_breakdown": {
        "monthly_profit_component": 0.0,
        "weekly_hit_rate_component": 0.0,
        "max_loss_penalty": 0.0,
        "trade_efficiency_component": 17.0501
      },
      "is_overfitting": false,
      "recommendation": "周达标率过低, 考虑: 1) 降低目标倍数 2) 增加杠杆(风险更高) 3) 优化入场时机 | 平均每笔亏损, 信号质量需要根本性改善"
    },
    "score": 17.05,
    "strategy_version_path": "results/strategy_versions/round_005_20260301_002359__入场优化__引入_RSI_作为动量确认_调整_STOCH_参数以降低假信号_优化_ROI_和_tr.py",
    "next_action": "continue",
    "status": "success",
    "comparison_matrix": {
      "round": 5,
      "candidate_id": "round_5",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {},
        "bear_2022": {},
        "sideways_2023": {},
        "recovery_2024": {},
        "recent_2025": {}
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 5,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": -50.0
      },
      "weighted_norm": 1.870829,
      "mode": "explore"
    }
  },
  {
    "round": 6,
    "timestamp": "2026-02-28T16:26:31.656533+00:00",
    "changes_made": "[入场重构] 换用 MACD_CROSS + BBANDS_BREAKOUT + ADX 组合替代 STOCH + ADOSC + ATR_EXPANSION + RSI，引入新家族 volatility (BBANDS_BREAKOUT) 和 trend (MACD_CROSS, ADX)，简化逻辑为趋势突破",
    "rationale": "上轮策略在所有窗口均亏损，胜率低（15.8%-42.9%），因子过多且逻辑矛盾（如 STOCH 超买/超卖与 ATR 扩张同时要求）。本轮选择趋势确认（ADX>25）+ 突破信号（价格突破布林带上轨/下轨）+ 动量确认（MACD 金叉/死叉）的组合，旨在捕捉单边市和恢复市的大波动，提高盈亏比。引入新家族 volatility (BBANDS_BREAKOUT) 符合硬约束，预期胜率提升至 40%+，盈亏比 2:1，改善跨市况适应力。",
    "backtest_metrics": {
      "total_profit_pct": 5.2368686500000265,
      "total_profit_abs": 5.2368686500000265,
      "max_drawdown_pct": 94.16919021782061,
      "max_drawdown_abs": 335.58273586000007,
      "sharpe_ratio": 0.0035179914055597544,
      "sortino_ratio": 0.005018274298457769,
      "profit_factor": 1.0047640346467195,
      "calmar_ratio": 0.05828041141469786,
      "sqn": 0.0189,
      "cagr": 0.010272304536920407,
      "expectancy": 0.01673120974440989,
      "expectancy_ratio": 0.0027549209937898222,
      "win_rate": 0.4217252396166134,
      "total_trades": 313,
      "trade_count_long": 160,
      "trade_count_short": 153,
      "avg_profit_per_trade_pct": 0.6498319322712003,
      "avg_trade_duration": "2:47:00",
      "backtest_days": 1823,
      "market_change": 7.828158636707855,
      "best_pair": {
        "key": "BTC/USDT:USDT",
        "trades": 59,
        "profit_mean": 0.029736766257890575,
        "profit_mean_pct": 2.97,
        "profit_total_abs": 193.86102012000003,
        "profit_total": 1.9386102012000004,
        "profit_total_pct": 193.86,
        "duration_avg": "3:05:00",
        "wins": 31,
        "draws": 0,
        "losses": 28,
        "winrate": 0.5254237288135594,
        "cagr": 0.2408838017578392,
        "expectancy": 3.285780002033899,
        "expectancy_ratio": 1.176281204858768,
        "sortino": 0.5155196587327342,
        "sharpe": 0.11117962360080648,
        "calmar": 28.52809672514766,
        "sqn": 1.3694,
        "profit_factor": 3.4785925388095458,
        "max_drawdown_account": 0.07121598065566918,
        "max_drawdown_abs": 19.91882915000005
      },
      "worst_pair": {
        "key": "ATOM/USDT:USDT",
        "trades": 15,
        "profit_mean": -0.03425987847831417,
        "profit_mean_pct": -3.43,
        "profit_total_abs": -164.20291028000003,
        "profit_total": -1.6420291028000003,
        "profit_total_pct": -164.2,
        "duration_avg": "2:33:00",
        "wins": 5,
        "draws": 0,
        "losses": 10,
        "winrate": 0.3333333333333333,
        "cagr": 0,
        "expectancy": -10.946860685333334,
        "expectancy_ratio": -0.5202444975451116,
        "sortino": -0.05150402780401815,
        "sharpe": -0.05493141166240278,
        "calmar": -0.9706368676741565,
        "sqn": -1.3075,
        "profit_factor": 0.21963325368233264,
        "max_drawdown_account": 1.7728983288,
        "max_drawdown_abs": 177.28983288
      },
      "total_trades_count": 313,
      "stake_limit_hit_count": 0,
      "weekly_target_hit_rate": 0,
      "total_weeks": 0,
      "target_hit_weeks": 0,
      "monthly_net_profit_avg": 0,
      "max_monthly_loss": 0,
      "avg_trade_duration_hours": 2.7875399361022364
    },
    "eval_result": {
      "passed": false,
      "score": 3.59,
      "gate_failures": [
        "weekly_target_hit_rate=0.00% < 25.00%",
        "monthly_net_profit_avg=0.00 <= 0.0"
      ],
      "score_breakdown": {
        "monthly_profit_component": 0.0,
        "weekly_hit_rate_component": 0.0,
        "max_loss_penalty": 0.0,
        "trade_efficiency_component": 3.5874
      },
      "is_overfitting": false,
      "recommendation": "周达标率过低, 考虑: 1) 降低目标倍数 2) 增加杠杆(风险更高) 3) 优化入场时机"
    },
    "score": 3.59,
    "strategy_version_path": "results/strategy_versions/round_006_20260301_002921__入场重构__换用_MACD_CROSS___BBANDS_BREAKOUT___ADX_组合替代_.py",
    "next_action": "运行回测验证新策略在 5 个窗口的表现，关注胜率、盈亏比和 weekly_target_hit_rate 是否提升。",
    "status": "success",
    "comparison_matrix": {
      "round": 6,
      "candidate_id": "round_6",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {
          "total_profit_pct": -54.467045430000006,
          "total_profit_abs": -54.467045430000006,
          "max_drawdown_pct": 54.46704542999999,
          "max_drawdown_abs": 54.46704543,
          "sharpe_ratio": -0.8664130573582955,
          "sortino_ratio": -0.9945028585170517,
          "profit_factor": 0.3906791205988503,
          "calmar_ratio": -16.190655232663392,
          "sqn": -1.1949,
          "cagr": -0.912274366279404,
          "expectancy": -2.8666866015789476,
          "expectancy_ratio": -0.4169037595902604,
          "win_rate": 0.3157894736842105,
          "total_trades": 19,
          "trade_count_long": 4,
          "trade_count_short": 15,
          "avg_profit_per_trade_pct": -3.2564753305972203,
          "avg_trade_duration": "0:27:00",
          "backtest_days": 118,
          "market_change": 6.433824368121245,
          "best_pair": {
            "key": "ADA/USDT:USDT",
            "trades": 2,
            "profit_mean": 0.16052604028284337,
            "profit_mean_pct": 16.05,
            "profit_total_abs": 22.05159889,
            "profit_total": 0.22051598890000002,
            "profit_total_pct": 22.05,
            "duration_avg": "0:15:00",
            "wins": 2,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 0.8522432943773033,
            "expectancy": 11.025799445,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": 0.3728713793534846,
            "calmar": -100,
            "sqn": 1.1515,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "SOL/USDT:USDT",
            "trades": 5,
            "profit_mean": -0.15397578006819612,
            "profit_mean_pct": -15.4,
            "profit_total_abs": -61.445064300000006,
            "profit_total": -0.6144506430000001,
            "profit_total_pct": -61.45,
            "duration_avg": "0:21:00",
            "wins": 0,
            "draws": 0,
            "losses": 5,
            "winrate": 0.0,
            "cagr": -0.9475610260784337,
            "expectancy": -12.289012860000001,
            "expectancy_ratio": -1.0,
            "sortino": -0.851155407822889,
            "sharpe": -0.851155407822889,
            "calmar": -16.190655232663385,
            "sqn": -2.1028,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.6144506430000001,
            "max_drawdown_abs": 61.445064300000006
          },
          "total_trades_count": 19,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 0.4473684210526316
        },
        "bear_2022": {
          "total_profit_pct": -25.207956170000003,
          "total_profit_abs": -25.20795617,
          "max_drawdown_pct": 31.566975909999996,
          "max_drawdown_abs": 31.566975910000004,
          "sharpe_ratio": -0.8318760735410623,
          "sortino_ratio": -1.3325906250717945,
          "profit_factor": 0.5097801774455791,
          "calmar_ratio": -9.971480805920404,
          "sqn": -1.3055,
          "cagr": -0.49988853942100053,
          "expectancy": -1.0083182467999998,
          "expectancy_ratio": -0.29413189353265246,
          "win_rate": 0.4,
          "total_trades": 25,
          "trade_count_long": 17,
          "trade_count_short": 8,
          "avg_profit_per_trade_pct": -1.0684732913366393,
          "avg_trade_duration": "0:32:00",
          "backtest_days": 153,
          "market_change": -0.3798385322447017,
          "best_pair": {
            "key": "LTC/USDT:USDT",
            "trades": 2,
            "profit_mean": 0.07791793138668353,
            "profit_mean_pct": 7.79,
            "profit_total_abs": 10.71185507,
            "profit_total": 0.10711855070000001,
            "profit_total_pct": 10.71,
            "duration_avg": "0:45:00",
            "wins": 2,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 0.27476589418183583,
            "expectancy": 5.355927535,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": 0.4001037513050435,
            "calmar": -100,
            "sqn": 1.6021,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "XRP/USDT:USDT",
            "trades": 3,
            "profit_mean": -0.039626310035476196,
            "profit_mean_pct": -3.96,
            "profit_total_abs": -9.67336792,
            "profit_total": -0.0967336792,
            "profit_total_pct": -9.67,
            "duration_avg": "0:40:00",
            "wins": 0,
            "draws": 0,
            "losses": 3,
            "winrate": 0.0,
            "cagr": -0.21549938219805653,
            "expectancy": -3.2244559733333333,
            "expectancy_ratio": -1.0,
            "sortino": -0.5714331454032473,
            "sharpe": -0.5714331454032473,
            "calmar": -12.486910571596596,
            "sqn": -2.1573,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.09673367920000003,
            "max_drawdown_abs": 9.67336792
          },
          "total_trades_count": 25,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 0.5399999999999999
        },
        "sideways_2023": {
          "total_profit_pct": -21.635296710000002,
          "total_profit_abs": -21.635296710000002,
          "max_drawdown_pct": 21.635296710000006,
          "max_drawdown_abs": 21.63529671,
          "sharpe_ratio": -1.9903904129426588,
          "sortino_ratio": -2.1454645241017167,
          "profit_factor": 0.10992198451616836,
          "calmar_ratio": -15.659814077494094,
          "sqn": -2.8381,
          "cagr": -0.5177976245012866,
          "expectancy": -1.1386998268421051,
          "expectancy_ratio": -0.6558469587775602,
          "win_rate": 0.2631578947368421,
          "total_trades": 19,
          "trade_count_long": 11,
          "trade_count_short": 8,
          "avg_profit_per_trade_pct": -1.2750215483251153,
          "avg_trade_duration": "0:39:00",
          "backtest_days": 122,
          "market_change": -0.054497021911408074,
          "best_pair": {
            "key": "ADA/USDT:USDT",
            "trades": 1,
            "profit_mean": 0.007092753761431871,
            "profit_mean_pct": 0.71,
            "profit_total_abs": 0.60295105,
            "profit_total": 0.006029510500000001,
            "profit_total_pct": 0.6,
            "duration_avg": "0:30:00",
            "wins": 1,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 0.018147646436076137,
            "expectancy": 0.60295105,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": -100,
            "calmar": -100,
            "sqn": -100.0,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "AVAX/USDT:USDT",
            "trades": 2,
            "profit_mean": -0.04475017432250952,
            "profit_mean_pct": -4.48,
            "profit_total_abs": -8.594373000000001,
            "profit_total": -0.08594373000000001,
            "profit_total_pct": -8.59,
            "duration_avg": "0:38:00",
            "wins": 0,
            "draws": 0,
            "losses": 2,
            "winrate": 0.0,
            "cagr": -0.23574429351414716,
            "expectancy": -4.2971865000000005,
            "expectancy_ratio": -1.0,
            "sortino": -1.1852193829770283,
            "sharpe": -1.1852193829770283,
            "calmar": -15.65981407749409,
            "sqn": -3.7843,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.08594373000000005,
            "max_drawdown_abs": 8.594373000000001
          },
          "total_trades_count": 19,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 0.6447368421052632
        },
        "recovery_2024": {
          "total_profit_pct": -21.621762490000002,
          "total_profit_abs": -21.621762490000002,
          "max_drawdown_pct": 21.621762489999995,
          "max_drawdown_abs": 21.62176249,
          "sharpe_ratio": -1.4552644506208534,
          "sortino_ratio": -1.9080813569635087,
          "profit_factor": 0.3442220270623222,
          "calmar_ratio": -12.569061299041318,
          "sqn": -2.1486,
          "cagr": -0.4429040933612095,
          "expectancy": -0.7722058032142858,
          "expectancy_ratio": -0.42157155403136426,
          "win_rate": 0.35714285714285715,
          "total_trades": 28,
          "trade_count_long": 18,
          "trade_count_short": 10,
          "avg_profit_per_trade_pct": -0.8528865067212869,
          "avg_trade_duration": "0:36:00",
          "backtest_days": 152,
          "market_change": 0.26429653100850814,
          "best_pair": {
            "key": "LINK/USDT:USDT",
            "trades": 1,
            "profit_mean": 0.02208431743305512,
            "profit_mean_pct": 2.21,
            "profit_total_abs": 2.05678464,
            "profit_total": 0.0205678464,
            "profit_total_pct": 2.06,
            "duration_avg": "0:45:00",
            "wins": 1,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 0.05010360561072669,
            "expectancy": 2.05678464,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": -100,
            "calmar": -100,
            "sqn": -100.0,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "BNB/USDT:USDT",
            "trades": 3,
            "profit_mean": -0.019974612262658606,
            "profit_mean_pct": -2.0,
            "profit_total_abs": -5.026128,
            "profit_total": -0.05026128,
            "profit_total_pct": -5.03,
            "duration_avg": "0:30:00",
            "wins": 0,
            "draws": 0,
            "losses": 3,
            "winrate": 0.0,
            "cagr": -0.11647167364795952,
            "expectancy": -1.675376,
            "expectancy_ratio": -1.0,
            "sortino": -0.5526582582944188,
            "sharpe": -0.5526582582944188,
            "calmar": -12.569061299041316,
            "sqn": -2.0728,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.05026128,
            "max_drawdown_abs": 5.026128
          },
          "total_trades_count": 28,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 0.5982142857142858
        },
        "recent_2025": {
          "total_profit_pct": -19.85407236,
          "total_profit_abs": -19.85407236,
          "max_drawdown_pct": 40.25569684599948,
          "max_drawdown_abs": 43.48638688,
          "sharpe_ratio": -0.5127855903542407,
          "sortino_ratio": -0.6661162924220302,
          "profit_factor": 0.6735519105821751,
          "calmar_ratio": -6.2401026859965745,
          "sqn": -0.7521,
          "cagr": -0.4143198801925593,
          "expectancy": -0.7090740128571422,
          "expectancy_ratio": -0.18654176538161416,
          "win_rate": 0.42857142857142855,
          "total_trades": 28,
          "trade_count_long": 11,
          "trade_count_short": 17,
          "avg_profit_per_trade_pct": -0.5876518946818219,
          "avg_trade_duration": "0:36:00",
          "backtest_days": 151,
          "market_change": -0.2185757530104535,
          "best_pair": {
            "key": "SOL/USDT:USDT",
            "trades": 3,
            "profit_mean": 0.057718664694683425,
            "profit_mean_pct": 5.77,
            "profit_total_abs": 14.9902101,
            "profit_total": 0.149902101,
            "profit_total_pct": 14.99,
            "duration_avg": "0:50:00",
            "wins": 3,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 0.4016209288453163,
            "expectancy": 4.9967367000000005,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": 0.6243301128351041,
            "calmar": -100,
            "sqn": 2.3262,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "ETH/USDT:USDT",
            "trades": 8,
            "profit_mean": -0.030806201847040585,
            "profit_mean_pct": -3.08,
            "profit_total_abs": -23.216118150000003,
            "profit_total": -0.23216118150000004,
            "profit_total_pct": -23.22,
            "duration_avg": "0:47:00",
            "wins": 3,
            "draws": 0,
            "losses": 5,
            "winrate": 0.375,
            "cagr": -0.4719528876028889,
            "expectancy": -2.90201476875,
            "expectancy_ratio": -0.4328515128489834,
            "sortino": -0.6066533611201236,
            "sharpe": -0.446921488417777,
            "calmar": -12.226363302484732,
            "sqn": -1.1682,
            "profit_factor": 0.30743757944162664,
            "max_drawdown_account": 0.24024911340000002,
            "max_drawdown_abs": 24.024911340000003
          },
          "total_trades_count": 28,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 0.6071428571428572
        }
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 6,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": 45.859707
      },
      "weighted_norm": 2.083565,
      "mode": "explore"
    }
  },
  {
    "round": 7,
    "timestamp": "2026-02-28T16:32:28.468638+00:00",
    "changes_made": "[参数优化+新因子] 降低ADX阈值至18，引入ATR_EXPANSION(volatility家族)过滤假突破，调整ROI表为0.5/0.2/0.05，stoploss放宽至-0.35",
    "rationale": "当前策略在熊市和横盘窗口表现不佳（ADX阈值25过高导致信号稀少），引入ATR_EXPANSION（volatility家族新因子）过滤低波动假突破，降低ADX阈值增加信号频率，调整ROI/stoploss适应滚仓复利需求",
    "backtest_metrics": {},
    "eval_result": {},
    "score": 0.0,
    "strategy_version_path": "results/strategy_versions/round_007_20260301_003616__参数优化_新因子__降低ADX阈值至18_引入ATR_EXPANSION_volatility家族.py",
    "next_action": "Backtest failed: ies)(reload=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/exchange/common.py\", line 191, in wrapper\n    return wrapper(*args, **kwargs)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/exchange/common.py\", line 191, in wrapper\n    return wrapper(*args, **kwargs)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/exchange/common.py\", line 191, in wrapper\n    return wrapper(*args, **kwargs)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/exchange/common.py\", line 194, in wrapper\n    raise ex\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/exchange/common.py\", line 179, in wrapper\n    return f(*args, **kwargs)\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/exchange/exchange.py\", line 682, in _load_async_markets\n    markets = self.loop.run_until_complete(self._api_reload_markets(reload=reload))\n  File \"/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 725, in run_until_complete\n    return future.result()\n           ~~~~~~~~~~~~~^^\n  File \"/Users/ts/Futures_strategy/V2ex-Agent-Dev/freqtrade_env/lib/python3.13/site-packages/freqtrade/exchange/exchange.py\", line 673, in _api_reload_markets\n    raise TemporaryError(\n        f\"Error in reload_markets due to {e.__class__.__name__}. Message: {e}\"\n    ) from e\nfreqtrade.exceptions.TemporaryError: Error in reload_markets due to ExchangeNotAvailable. Message: binance GET https://api.binance.com/api/v3/exchangeInfo\n2026-03-01 00:36:39,952 - freqtrade - ERROR - Could not load markets, therefore cannot start. Please investigate the above error for more details.\n",
    "status": "failed",
    "comparison_matrix": {
      "round": 7,
      "candidate_id": "round_7",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {},
        "bear_2022": {},
        "sideways_2023": {},
        "recovery_2024": {},
        "recent_2025": {}
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 7,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": 44.16919
      },
      "weighted_norm": 2.068905,
      "mode": "explore"
    }
  },
  {
    "round": 8,
    "timestamp": "2026-02-28T16:36:40.225602+00:00",
    "changes_made": "[入场优化] 引入RSI动量过滤，降低ADX阈值，调整出场逻辑",
    "rationale": "当前策略在recent_2025窗口有31笔交易但胜率仅45%，最大回撤28%，盈亏比不足。引入RSI作为新家族(momentum)因子，提供动量确认，降低ADX阈值以捕捉更多趋势，调整出场逻辑减少过早离场。",
    "backtest_metrics": {},
    "eval_result": {},
    "score": 0.0,
    "strategy_version_path": "results/strategy_versions/round_008_20260301_004020__入场优化__引入RSI动量过滤_降低ADX阈值_调整出场逻辑.py",
    "next_action": "Backtest failed: NameError: name 'current_alance' is not defined. Did you mean: 'current_balance'?\n2026-03-01 00:40:43,110 - LotteryMindsetStrategy - INFO - [滚仓] ALL IN: 80.80 USDT (余额=81.62, 第2笔)\n2026-03-01 00:40:43,110 - LotteryMindsetStrategy - INFO - [BudgetCtrl] 拒绝开仓 BTC/USDT:USDT - 本周已达标或亏完\n2026-03-01 00:40:43,110 - LotteryMindsetStrategy - INFO - [滚仓] ALL IN: 80.80 USDT (余额=81.62, 第2笔)\n2026-03-01 00:40:43,110 - LotteryMindsetStrategy - INFO - [BudgetCtrl] 拒绝开仓 ETH/USDT:USDT - 本周已达标或亏完\n2026-03-01 00:40:43,",
    "status": "failed",
    "comparison_matrix": {
      "round": 8,
      "candidate_id": "round_8",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {},
        "bear_2022": {},
        "sideways_2023": {},
        "recovery_2024": {},
        "recent_2025": {
          "total_profit_pct": 61.997355490000004,
          "total_profit_abs": 61.997355490000004,
          "max_drawdown_pct": 28.129629404466627,
          "max_drawdown_abs": 63.404787489999975,
          "sharpe_ratio": 0.5007964413758731,
          "sortino_ratio": 1.2164838332710555,
          "profit_factor": 1.427548908795684,
          "calmar_ratio": 27.88551305649001,
          "sqn": 0.6993,
          "cagr": 2.2094191617632144,
          "expectancy": 1.9999146932258087,
          "expectancy_ratio": 0.23446230482343977,
          "win_rate": 0.45161290322580644,
          "total_trades": 31,
          "trade_count_long": 16,
          "trade_count_short": 15,
          "avg_profit_per_trade_pct": 2.067221665735244,
          "avg_trade_duration": "2:50:00",
          "backtest_days": 151,
          "market_change": -0.2185757530104535,
          "best_pair": {
            "key": "XRP/USDT:USDT",
            "trades": 2,
            "profit_mean": 0.29302237444149987,
            "profit_mean_pct": 29.3,
            "profit_total_abs": 62.73018999,
            "profit_total": 0.6273018999,
            "profit_total_pct": 62.73,
            "duration_avg": "4:00:00",
            "wins": 2,
            "draws": 0,
            "losses": 0,
            "winrate": 1.0,
            "cagr": 2.2446263340768433,
            "expectancy": 31.365094995,
            "expectancy_ratio": 100.0,
            "sortino": -100,
            "sharpe": 5.641918000740203,
            "calmar": -100,
            "sqn": 22.296,
            "profit_factor": 0.0,
            "max_drawdown_account": 0.0,
            "max_drawdown_abs": 0.0
          },
          "worst_pair": {
            "key": "BTC/USDT:USDT",
            "trades": 12,
            "profit_mean": -0.01977266732015676,
            "profit_mean_pct": -1.98,
            "profit_total_abs": -36.385984099999995,
            "profit_total": -0.36385984099999996,
            "profit_total_pct": -36.39,
            "duration_avg": "2:28:00",
            "wins": 3,
            "draws": 0,
            "losses": 9,
            "winrate": 0.25,
            "cagr": -0.6649233096977634,
            "expectancy": -3.0321653416666665,
            "expectancy_ratio": -0.5423326775744493,
            "sortino": -1.6129388520791432,
            "sharpe": -0.865920164470348,
            "calmar": -12.652300115591254,
            "sqn": -1.8916,
            "profit_factor": 0.2768897632340676,
            "max_drawdown_account": 0.363859841,
            "max_drawdown_abs": 36.3859841
          },
          "total_trades_count": 31,
          "stake_limit_hit_count": 0,
          "weekly_target_hit_rate": 0,
          "total_weeks": 0,
          "target_hit_weeks": 0,
          "monthly_net_profit_avg": 0,
          "max_monthly_loss": 0,
          "avg_trade_duration_hours": 2.8387096774193545
        }
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 8,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": -50.0
      },
      "weighted_norm": 1.870829,
      "mode": "explore"
    }
  },
  {
    "round": 9,
    "timestamp": "2026-02-28T16:41:25.958207+00:00",
    "changes_made": "[参数调整] 降低入场阈值以增加交易频率，优化出场逻辑以提升盈亏比",
    "rationale": "当前策略在熊市和横盘窗口表现不佳，入场条件过于严格导致交易稀少。通过降低ADX阈值和ATR乘数，放宽入场条件以捕捉更多波动机会。同时，将出场条件从布林中轨调整为布林带边缘，以获取更大利润空间，适应滚仓复利需求。引入新家族因子RSI_TREND（momentum家族，之前未使用）以增强动量确认，避免逻辑矛盾。",
    "backtest_metrics": {
      "total_profit_pct": 1069.10797465,
      "total_profit_abs": 1069.10797465,
      "max_drawdown_pct": 43.56106861792536,
      "max_drawdown_abs": 189.42684693,
      "sharpe_ratio": 0.12374592261411406,
      "sortino_ratio": 0.37981533655332034,
      "profit_factor": 3.4083832423188283,
      "calmar_ratio": 25.72070139615282,
      "sqn": 2.1913,
      "cagr": 0.6360826218861959,
      "expectancy": 38.18242766607142,
      "expectancy_ratio": 1.032164246708069,
      "win_rate": 0.5714285714285714,
      "total_trades": 28,
      "trade_count_long": 18,
      "trade_count_short": 10,
      "avg_profit_per_trade_pct": 12.458509593791614,
      "avg_trade_duration": "10:11:00",
      "backtest_days": 1823,
      "market_change": 7.828158636707855,
      "best_pair": {
        "key": "XRP/USDT:USDT",
        "trades": 6,
        "profit_mean": 0.2872245646490011,
        "profit_mean_pct": 28.72,
        "profit_total_abs": 665.30506752,
        "profit_total": 6.653050675199999,
        "profit_total_pct": 665.31,
        "duration_avg": "11:38:00",
        "wins": 5,
        "draws": 0,
        "losses": 1,
        "winrate": 0.8333333333333334,
        "cagr": 0.5030064610196316,
        "expectancy": 110.88417792,
        "expectancy_ratio": 9.445052756102331,
        "sortino": -100,
        "sharpe": 0.07855651187601959,
        "calmar": 59.390283994781115,
        "sqn": 2.7935,
        "profit_factor": 57.67031653661398,
        "max_drawdown_account": 0.11739921499999995,
        "max_drawdown_abs": 11.7399215
      },
      "worst_pair": {
        "key": "SOL/USDT:USDT",
        "trades": 2,
        "profit_mean": -0.2935236536081945,
        "profit_mean_pct": -29.35,
        "profit_total_abs": -151.99797676,
        "profit_total": -1.5199797676,
        "profit_total_pct": -152.0,
        "duration_avg": "10:22:00",
        "wins": 0,
        "draws": 0,
        "losses": 2,
        "winrate": 0.0,
        "cagr": 0,
        "expectancy": -75.99898838,
        "expectancy_ratio": -1.0,
        "sortino": -0.05449485137646419,
        "sharpe": -0.05449485137646419,
        "calmar": -1.0479963343139223,
        "sqn": -2.6,
        "profit_factor": 0.0,
        "max_drawdown_account": 1.5199797676,
        "max_drawdown_abs": 151.99797676
      },
      "total_trades_count": 28,
      "stake_limit_hit_count": 0,
      "weekly_target_hit_rate": 0,
      "total_weeks": 0,
      "target_hit_weeks": 0,
      "monthly_net_profit_avg": 0,
      "max_monthly_loss": 0,
      "avg_trade_duration_hours": 10.1875
    },
    "eval_result": {
      "passed": false,
      "score": 0.98,
      "gate_failures": [
        "weekly_target_hit_rate=0.00% < 25.00%",
        "total_trades=28 < 50",
        "monthly_net_profit_avg=0.00 <= 0.0"
      ],
      "score_breakdown": {
        "monthly_profit_component": 0.0,
        "weekly_hit_rate_component": 0.0,
        "max_loss_penalty": 0.0,
        "trade_efficiency_component": 0.9816
      },
      "is_overfitting": false,
      "recommendation": "交易次数不足(28), 建议放宽入场条件或增加交易对 | 周达标率过低, 考虑: 1) 降低目标倍数 2) 增加杠杆(风险更高) 3) 优化入场时机"
    },
    "score": 0.98,
    "strategy_version_path": "results/strategy_versions/round_009_20260301_004418__参数调整__降低入场阈值以增加交易频率_优化出场逻辑以提升盈亏比.py",
    "next_action": "STOP: No improvement in last 3 successful rounds (scores: [17.05, 3.59, 0.98])",
    "status": "success",
    "comparison_matrix": {
      "round": 9,
      "candidate_id": "round_9",
      "windows": [
        "bull_2021",
        "bear_2022",
        "sideways_2023",
        "recovery_2024",
        "recent_2025"
      ],
      "metrics_by_window": {
        "bull_2021": {},
        "bear_2022": {},
        "sideways_2023": {},
        "recovery_2024": {},
        "recent_2025": {}
      },
      "robustness_score": 0.0,
      "dryrun_price_slippage_pct": 0.0,
      "dryrun_signal_gap_pct": 0.0,
      "dryrun_pnl_gap_pct": 0.0
    },
    "target_gap": {
      "round": 9,
      "target_profile": "default",
      "deltas": {
        "weekly_target_hit_rate": 0.25,
        "monthly_net_profit_avg": 100.0,
        "max_monthly_loss": -200.0,
        "max_drawdown_pct": -50.0
      },
      "weighted_norm": 1.870829,
      "mode": "explore"
    }
  }
]